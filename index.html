<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ï£ºÎãàÏñ¥ Ïä§ÏøºÏãú ÏÑ†ÏàòÎ•º ÏúÑÌïú Ï†ÑÎ¨∏ Ïä§Ìä∏Î†àÏπ≠ Ïï±">
    <meta name="theme-color" content="#10b981">
    <title>Ï£ºÎãàÏñ¥ Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠ Ïï±</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuyjvOuLiOyWtCDsiqTsv7Dsovwg7Iqk7Yq47Ja27LmtIOyVsSIsCiAgInNob3J0X25hbWUiOiAi7Iqk7Yq47Ja2LSvp16IiLAogICJkZXNjcmlwdGlvbiI6ICLso7zri4jslrTtlJkg7Iqk7L+w7Iqs66qhIOyEoOyImOuluOyghCDsnbjtnZUg7KCV66y47LC9IOy8gOuUpCDsiqTtirjslrbs5Kcg7JWx7ISgIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjMTBiOTgxIiwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhPVElpSUdobGFXZG9kRDBpTVRreUlqNEtJQ0E4Y21WamRDQjNhV1IwYUQwaU1Ua3lJaUJvWldsbmFIUTlJakU1TWlJZ1ptbHNiRDBpSXpFd1lqazRNU0lnY25nOUlqRXdJaUI1UFNJeE1DSWdkMmxrZEdnOUlqRTNNaUlnYUdWcFoyaDBQU0l4TnpJaUx6NEtJQ0E4ZFdOMGNpQjJaWEp6YVc5dVBTSXhMakVpSUdWdVkyOWthVzVuUFNKMWRHWXRPQ0krUGpFeU16UXVOQNM3OEtJQ0E4WnlCemRISnZhMlZmZDJsa2RHZzlJakVpSUhOMGNtOXJaUzB5YVc1bFkyRndQU0p5YjNWdVpDSWdjM1J5YjJ0bFBTSWpPRGswTXpFMUluOCtDbE02SjJOMGNtOXJaU0F6TkRNdU1UVXpJREkxTWk0ek5qWXVOQ0F6TmpBaUxqTWdNVGd5TGkwdE5EY3VPQ0F4TmpNdU55QTFNak11T0RBdE5EY3VPQ0E1T0M0NExqazBObEk4WnlCemRuUXRhWFJsY2owMWdpWjZNaWRqZEhKdmEyVTlJaUl5OEQiLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJMU1USWlJR2hsYVdkb2REMGlOVEV5SWo0S0lDQThjbVZqZENCM2FXUjBhRDBpTlRFeUlpQm9aV2xuYUhROUlqVXhNaUlnWm1sc2JEMGlJekV3WWprNE1TSWdjbmc5SWpJd0lpQjVQU0l5TUNJNGQybGtkR2c5SWpRMVlsTHVhbONvaGRYOGliMmhsYVdkb2REQWlOVEl6SWk4K0NpQWdQSFZPlbYjk5V1NPQWlNUzR4SmlCbGJXOXVaR2x1WnowaWRYUm1MVGdpTTRpdVpWdEFlV0JDYU9Ca2ZIOW9hN1kwWUFNNUIzMlFpeklyYUdjKzhhTnJCek9Td2RNcWpEQWpNcWRhN3lDUGRNYXlkbm9VZEhQRXRCdWVMK1JzT2ZvcCtFVDFHYzJTSlNTSFB6M1RLUWNsOEY5Q1QzUjdCZGlHYWZQcmdVUEFNdEQ0T3lGNlkzU0FqSXJESVBERG8yQVl5T1pMSFZUa005aTUwRGc3NHV1SWNyc2xRUkFhcnhKT1V3RDE1OXRkRThzNkJwOXcrUVRCcnZNbSs3UFNNSFpaOWR2aFQzRkx5ZnlydTJOdURqTy93REJOVHdVVXNqOXJzSWpJQWdJVzVGT2dGb2dBSzJJRGNjSDM2dEo1bklQMUd6NlMrdVdVY0hPUkRBZjQzUHVnSStBeXVPZU8xR2dJQUFBQWIzcDBVQUFBQVhSU1Rsbzh0NzU2a0dBQUFBQTFmUW1Iek1kYWZzeDJvQUJOSUFCZ1pIVlp1ZmJPSE9FK1BNK2ZsR2ZKR2ZxZDdlR3VTOWVhZWJkUk1oQXlzaStlTXVUazR5K2Vla3pWODl6bjNMN3VEanJyZGZVaXVsaWFhK084ODUrNDFOaTYzT085OTFQZVk4Qnh3K1RiTURaaVdXbUx3Zzhvc2l5b2lGV1NSdDJWTlZEZ01DbmdTa1NJczlUZkphTzRyVlU4WHIzSE5PQy9jb0FvUW9hbTI4RGhnZkUxNjE1bjh2SjdDV1lHOGNYZDlhOGVlM1BWanJJWnJwdlZhcWNtOElLb1FoM2tkTno2emhHNE1SZWZmZGFSME51c0x2dWVGcTJBK0E4N1l5MzFndWpoUGd4Y2xJRVdSblJQTUdhcmZoVTNZSUdCSElTaE9qS1FGUUJCSTlCcS9VNmNmSVVQQUJqU1FxSGdUenIvUElBNk8zZUdUZ0FBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    
    <!-- CSS Framework -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        .app-container {
            max-width: 400px;
            margin: 0 auto;
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .routine-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .routine-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .timer-display {
            font-size: 3rem;
            font-weight: 700;
            color: #374151;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        /* PWA Install Button */
        .install-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            cursor: pointer;
            display: none;
            z-index: 1000;
        }
        
        .install-button:hover {
            background: #059669;
            transform: translateY(-1px);
        }
        
        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #f59e0b;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: none;
            z-index: 1000;
        }
        
        /* Safe area for iOS */
        @supports (padding: max(0px)) {
            .app-container {
                padding-top: max(1rem, env(safe-area-inset-top));
                padding-bottom: max(1rem, env(safe-area-inset-bottom));
                padding-left: max(1rem, env(safe-area-inset-left));
                padding-right: max(1rem, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <!-- PWA Install Button -->
    <button id="installButton" class="install-button">
        üì± Ïï± ÏÑ§ÏπòÌïòÍ∏∞
    </button>
    
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        ‚ö†Ô∏è Ïò§ÌîÑÎùºÏù∏ Î™®Îìú
    </div>
    
    <!-- App Container -->
    <div id="root" class="app-container"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        // Icons components (simplified SVG icons)
        const Icons = {
            User: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            Play: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.5a2.5 2.5 0 110 5H9m6-5h1.5a2.5 2.5 0 110 5H15M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Pause: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Settings: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            ),
            AlertTriangle: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                </svg>
            ),
            Home: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
            ),
            SkipForward: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                </svg>
            ),
            SkipBack: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
                </svg>
            ),
            CheckCircle: () => (
                <svg className="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            BookOpen: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
            ),
            TrendingUp: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
            )
        };

        const StretchingApp = () => {
            // State management with localStorage persistence
            const [currentScreen, setCurrentScreen] = useState('welcome');
            const [userProfile, setUserProfile] = useState(() => {
                const saved = localStorage.getItem('userProfile');
                return saved ? JSON.parse(saved) : null;
            });
            const [currentRoutine, setCurrentRoutine] = useState(null);
            const [currentPhase, setCurrentPhase] = useState(0);
            const [currentExercise, setCurrentExercise] = useState(0);
            const [timeRemaining, setTimeRemaining] = useState(0);
            const [isRunning, setIsRunning] = useState(false);
            const [sessionProgress, setSessionProgress] = useState(() => {
                const saved = localStorage.getItem('sessionProgress');
                return saved ? JSON.parse(saved) : [];
            });

            // Save to localStorage when state changes
            useEffect(() => {
                if (userProfile) {
                    localStorage.setItem('userProfile', JSON.stringify(userProfile));
                    setCurrentScreen('main');
                }
            }, [userProfile]);

            useEffect(() => {
                localStorage.setItem('sessionProgress', JSON.stringify(sessionProgress));
            }, [sessionProgress]);

            // Exercise data
            const routines = {
                warmup: {
                    title: 'Í≤ΩÍ∏∞ Ï†Ñ ÏõúÏóÖ (ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠)',
                    description: 'Ïä§ÏøºÏãú Í≤ΩÍ∏∞Î•º ÏúÑÌïú 3Îã®Í≥Ñ Í≥ºÌïôÏ†Å Ï§ÄÎπÑÏö¥Îèô',
                    color: 'bg-emerald-500',
                    phases: [
                        {
                            name: '1Îã®Í≥Ñ: ÏùºÎ∞òÏ†Å ÌôúÏÑ±Ìôî',
                            description: 'Ïã¨Î∞ïÏàò ÏÉÅÏäπ Î∞è Ï≤¥Ïò® Ï°∞Ï†à',
                            exercises: [
                                {
                                    name: 'Í∞ÄÎ≤ºÏö¥ Ï°∞ÍπÖ & Ï†êÌïëÏû≠',
                                    duration: 180,
                                    instructions: 'ÏΩîÌä∏ Ï£ºÎ≥ÄÏùÑ Í∞ÄÎ≥çÍ≤å Ï°∞ÍπÖÌïòÍ±∞ÎÇò Ï†úÏûêÎ¶¨ÏóêÏÑú Ï†êÌïëÏû≠ÏùÑ Ïã§ÏãúÌïòÏó¨ Î™∏ÏùÑ ÏòàÏó¥ÌïòÏÑ∏Ïöî. Ïà®Ïù¥ ÏïΩÍ∞Ñ Ï∞∞ Ï†ïÎèÑÏùò Í∞ïÎèÑÎ°ú ÏßÑÌñâÌï©ÎãàÎã§.',
                                    targetMuscles: 'Ï†ÑÏã†, Ïã¨ÌèêÏßÄÍµ¨Î†•',
                                    safetyTip: 'Í∞ëÏûëÏä§Îü¨Ïö¥ ÏõÄÏßÅÏûÑÏùÄ ÌîºÌïòÍ≥† Ï†êÏßÑÏ†ÅÏúºÎ°ú Í∞ïÎèÑÎ•º ÎÜíÏù¥ÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'Ìåî ÎèåÎ¶¨Í∏∞ & Ïñ¥Íπ® ÌíÄÍ∏∞',
                                    duration: 120,
                                    instructions: 'ÏïûÏúºÎ°ú, Îí§Î°ú ÌÅ¨Í≤å ÏõêÏùÑ Í∑∏Î¶¨Î©∞ Ïñ¥Íπ®Î•º ÌíÄÏñ¥Ï§çÎãàÎã§. ÏûëÏùÄ ÏõêÏóêÏÑú ÏãúÏûëÌïòÏó¨ Ï†êÏ∞® ÌÅ¨Í≤å ÎßåÎìúÏÑ∏Ïöî.',
                                    targetMuscles: 'Ïñ¥Íπ®, ÏÉÅÏ≤¥',
                                    safetyTip: 'Ïñ¥Íπ®Ïóê ÌÜµÏ¶ùÏù¥ ÏûàÎã§Î©¥ ÏûëÏùÄ Î≤îÏúÑÏóêÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî.'
                                }
                            ]
                        },
                        {
                            name: '2Îã®Í≥Ñ: Ï†ÑÏã† Í∞ÄÎèôÏÑ± ÌôïÎ≥¥',
                            description: 'Í¥ÄÏ†à Í∞ÄÎèôÎ≤îÏúÑ Ï¶ùÎåÄ Î∞è Í∑ºÏú° ÌôúÏÑ±Ìôî',
                            exercises: [
                                {
                                    name: 'Î™∏ÌÜµ ÌíçÏ∞® ÎèåÎ¶¨Í∏∞',
                                    duration: 60,
                                    instructions: 'Ïñë Îã§Î¶¨Î•º Ïñ¥Íπ®ÎÑàÎπÑÎ°ú Î≤åÎ¶¨Í≥† ÏÑ† ÌõÑ, ÌóàÎ¶¨Î•º ÏàôÏó¨ ÏôºÌåîÏùÑ Ïò§Î•∏Î∞ú Ï™ΩÏúºÎ°ú, Ïò§Î•∏ÌåîÏùÄ ÌïòÎäòÎ°ú ÎªóÏñ¥ ÍµêÏ∞® ÎèôÏûëÏùÑ 20-30Ìöå Î∞òÎ≥µÌï©ÎãàÎã§.',
                                    targetMuscles: 'Î™∏ÌÜµ, Îì±, ÌóàÎ¶¨',
                                    safetyTip: 'Í≥ºÎèÑÌïú Î∞òÎèôÏùÄ Í∏àÏßÄ. Î∂ÄÎìúÎüΩÍ≥† ÌÜµÏ†úÎêú ÏõÄÏßÅÏûÑÏúºÎ°ú ÏßÑÌñâÌïòÏÑ∏Ïöî.',
                                    reps: '20-30Ìöå'
                                },
                                {
                                    name: 'Îã§Î¶¨ ÏïûÎí§ & Ï¢åÏö∞ ÌùîÎì§Í∏∞',
                                    duration: 120,
                                    instructions: 'Î≤ΩÏù¥ÎÇò ÌååÌä∏ÎÑàÎ•º Ïû°Í≥† Í∑†ÌòïÏùÑ Ïú†ÏßÄÌïòÎ©∞ ÌïúÏ™Ω Îã§Î¶¨Î•º ÏïûÎí§Î°ú, Í∑∏Îã§Ïùå Ï¢åÏö∞Î°ú Î∂ÄÎìúÎüΩÍ≤å ÌùîÎì≠ÎãàÎã§.',
                                    targetMuscles: 'ÌñÑÏä§Ìä∏ÎßÅ, ÏóâÎç©Ïù¥ Íµ¥Í≥°Í∑º',
                                    safetyTip: 'Í∑†ÌòïÏùÑ ÏûÉÏßÄ ÏïäÎèÑÎ°ù ÏßÄÏßÄÎåÄÎ•º ÌôúÏö©ÌïòÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'ÌïòÏù¥ Îãà & Î≤ÑÌä∏ ÌÇ•',
                                    duration: 60,
                                    instructions: 'Ï†úÏûêÎ¶¨ÏóêÏÑú Í∞ÄÎ≥çÍ≤å Îõ∞Î©¥ÏÑú Î¨¥Î¶éÏùÑ Í∞ÄÏä¥ ÎÜíÏù¥ÍπåÏßÄ Ïò¨Î¶¨Îäî ÌïòÏù¥ ÎãàÏôÄ Î∞úÎí§ÍøàÏπòÎ•º ÏóâÎç©Ïù¥Î°ú Ï∞®Îäî Î≤ÑÌä∏ ÌÇ•ÏùÑ Î≤àÍ∞àÏïÑ ÏßÑÌñâÌï©ÎãàÎã§.',
                                    targetMuscles: 'ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º, ÌñÑÏä§Ìä∏ÎßÅ, ÎëîÍ∑º',
                                    safetyTip: 'Ï∞©ÏßÄ Ïãú Î¨¥Î¶éÏóê Î¨¥Î¶¨Í∞Ä Í∞ÄÏßÄ ÏïäÎèÑÎ°ù Î∂ÄÎìúÎüΩÍ≤å Ï∞©ÏßÄÌïòÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'Í≥†Í¥ÄÏ†à ÌöåÏ†Ñ Ïö¥Îèô',
                                    duration: 90,
                                    instructions: 'Î¨¥Î¶éÏùÑ 90ÎèÑÎ°ú Îì§Ïñ¥Ïò¨Î†§ Î∞îÍπ• Î∞©Ìñ•ÏúºÎ°ú ÏõêÏùÑ Í∑∏Î¶¨ÎìØ ÌöåÏ†ÑÏãúÌÇµÎãàÎã§. ÏóâÎç©Ïù¥ Í¥ÄÏ†àÏùò Í∞ÄÎèôÏÑ±ÏùÑ ÎÜíÏûÖÎãàÎã§.',
                                    targetMuscles: 'Í≥†Í¥ÄÏ†à, ÏóâÎç©Ïù¥',
                                    safetyTip: 'ÌÜµÏ¶ùÏù¥ ÎäêÍª¥ÏßÄÎ©¥ ÌöåÏ†Ñ Î≤îÏúÑÎ•º Ï§ÑÏù¥ÏÑ∏Ïöî.'
                                }
                            ]
                        },
                        {
                            name: '3Îã®Í≥Ñ: Ïä§ÏøºÏãú ÌäπÏ†ï ÎèôÏûë ÌôúÏÑ±Ìôî',
                            description: 'Ïã§Ï†ú Í≤ΩÍ∏∞ ÎèôÏûë Î™®Î∞© Î∞è Í∑ºÏã†Í≤Ω ÌôúÏÑ±Ìôî',
                            exercises: [
                                {
                                    name: 'Í≥†Ïä§ÌåÖ (Ghosting) ÌõàÎ†®',
                                    duration: 300,
                                    instructions: 'ÎùºÏºìÏùÑ Îì§Í≥† ÏΩîÌä∏Ïùò ÎÑ§ Í∑ÄÌâÅÏù¥ÏôÄ Ï§ëÏïô T-Ï°¥ÏúºÎ°ú Îπ†Î•¥Í≤å Ïù¥ÎèôÌïòÎ©∞ Îü∞ÏßÄ ÏûêÏÑ∏Î°ú Í∞ÄÏÉÅÏùò Í≥µÏùÑ ÏπòÎäî ÎèôÏûëÏùÑ Ïó∞ÏäµÌï©ÎãàÎã§.',
                                    targetMuscles: 'Ï†ÑÏã† (Í≤ΩÍ∏∞ ÌäπÌôî)',
                                    safetyTip: 'Ï∂©Î∂ÑÌïú Í≥µÍ∞ÑÏùÑ ÌôïÎ≥¥ÌïòÍ≥† ÎØ∏ÎÅÑÎü¨ÏßÄÏßÄ ÏïäÎäî Ïã†Î∞úÏùÑ Ï∞©Ïö©ÌïòÏÑ∏Ïöî.'
                                }
                            ]
                        }
                    ]
                },
                cooldown: {
                    title: 'Í≤ΩÍ∏∞ ÌõÑ Ïø®Îã§Ïö¥ (Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠)',
                    description: 'Í∑ºÏú° Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ Ï¥âÏßÑÏùÑ ÏúÑÌïú Ï≤¥Í≥ÑÏ†Å Ï†ïÎ¶¨Ïö¥Îèô',
                    color: 'bg-blue-500',
                    phases: [
                        {
                            name: '1Îã®Í≥Ñ: Ï†êÏßÑÏ†Å Ïã¨Î∞ïÏàò Í∞êÏÜå',
                            description: 'Í≤ΩÍ∏∞ ÌõÑ ÏïàÏ†ÑÌïú Ïã¨Î∞ïÏàò Ï†ïÏÉÅÌôî',
                            exercises: [
                                {
                                    name: 'Ï≤úÏ≤úÌûà Í±∑Í∏∞',
                                    duration: 180,
                                    instructions: 'ÏΩîÌä∏Î•º Ï≤úÏ≤úÌûà Í±∏ÏúºÎ©∞ Ìò∏Ìù°ÏùÑ Ï†ïÏÉÅÌôîÌïòÍ≥† Ïã¨Î∞ïÏàòÎ•º Ï†êÏßÑÏ†ÅÏúºÎ°ú ÎÇÆÏ∂•ÎãàÎã§. Í∞ëÏûëÏä§ÎüΩÍ≤å Î©àÏ∂îÏßÄ ÎßàÏÑ∏Ïöî.',
                                    targetMuscles: 'Ïã¨ÌèêÍ∏∞Îä• Ï†ïÏÉÅÌôî',
                                    safetyTip: 'Ïñ¥ÏßÄÎü¨ÏõÄÏù¥ ÎäêÍª¥ÏßÄÎ©¥ Ï¶âÏãú ÏïâÏïÑÏÑú Ìú¥ÏãùÌïòÏÑ∏Ïöî.'
                                }
                            ]
                        },
                        {
                            name: '2Îã®Í≥Ñ: Ï£ºÏöî Í∑ºÏú°Íµ∞ Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠',
                            description: 'Í≤ΩÍ∏∞Î°ú Í∏¥Ïû•Îêú Í∑ºÏú°Ïùò Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ',
                            exercises: [
                                {
                                    name: 'ÌñÑÏä§Ìä∏ÎßÅ Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'Î∞îÎã•Ïóê ÏïâÏïÑ Îã§Î¶¨Î•º Í≥ßÍ≤å ÎªóÍ≥† ÏÉÅÏ≤¥Î•º ÏïûÏúºÎ°ú ÏàôÏù¥Í±∞ÎÇò, ÎàÑÏö¥ ÏûêÏÑ∏ÏóêÏÑú ÌïúÏ™Ω Îã§Î¶¨Î•º Í∞ÄÏä¥ÏúºÎ°ú ÎãπÍ≤® ÌóàÎ≤ÖÏßÄ Îí§Ï™ΩÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                    targetMuscles: 'ÌóàÎ≤ÖÏßÄ Îí§Ï™Ω',
                                    safetyTip: 'Î∞òÎèôÏùÑ Ï£ºÏßÄ ÎßêÍ≥† Î∂ÄÎìúÎüΩÍ≤å ÎäòÎ†§Ï£ºÏÑ∏Ïöî. ÌÜµÏ¶ùÏù¥ ÏïÑÎãå ÎãπÍ∏∞Îäî ÎäêÎÇåÏóê ÏßëÏ§ëÌïòÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'ÏÑ† ÏûêÏÑ∏ÏóêÏÑú Î≤ΩÏùÑ ÏßöÍ≥† ÌïúÏ™Ω Îã§Î¶¨Î•º Îí§Î°ú Íµ¨Î∂ÄÎ†§ ÏÜêÏúºÎ°ú Ïû°Í≥†, Î∞úÎí§ÍøàÏπòÎ•º ÏóâÎç©Ïù¥ Ï™ΩÏúºÎ°ú Î∂ÄÎìúÎüΩÍ≤å ÎãπÍπÅÎãàÎã§.',
                                    targetMuscles: 'ÌóàÎ≤ÖÏßÄ ÏïûÏ™Ω',
                                    safetyTip: 'Î¨¥Î¶éÏù¥ Î∞îÍπ•Ï™ΩÏúºÎ°ú Î≤åÏñ¥ÏßÄÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùòÌïòÍ≥†, ÌóàÎ¶¨Í∞Ä Í≥ºÎèÑÌïòÍ≤å Í∫æÏù¥ÏßÄ ÏïäÍ≤å ÌïòÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'Ïû•ÏöîÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'Îü∞ÏßÄ ÏûêÏÑ∏ÏóêÏÑú Îí§Ï™Ω Î¨¥Î¶éÏùÑ Î∞îÎã•Ïóê ÎåÄÍ≥†, Í≥®Î∞òÏùÑ ÏïûÏúºÎ°ú Î∂ÄÎìúÎüΩÍ≤å Î∞ÄÏñ¥ ÌóàÎ≤ÖÏßÄ ÏïûÏ™ΩÍ≥º Í≥®Î∞ò ÏïûÏ™ΩÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                    targetMuscles: 'ÏóâÎç©Ïù¥ Íµ¥Í≥°Í∑º, Í≥®Î∞ò',
                                    safetyTip: 'ÌóàÎ¶¨Í∞Ä Í≥ºÎèÑÌïòÍ≤å Í∫æÏù¥ÏßÄ ÏïäÎèÑÎ°ù Î≥µÎ∂ÄÏóê ÏÇ¥Ïßù ÌûòÏùÑ Ï£ºÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'Ï¢ÖÏïÑÎ¶¨ Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'Î≤ΩÏùÑ ÏßöÍ≥† Ìïú Î∞úÏùÑ Îí§Î°ú ÎªóÏñ¥ Î∞úÎí§ÍøàÏπòÎ•º Î∞îÎã•Ïóê ÏßÄÍ∑∏Ïãú ÎàÑÎ•¥Î©∞ Ï¢ÖÏïÑÎ¶¨ Í∑ºÏú°ÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                    targetMuscles: 'Ï¢ÖÏïÑÎ¶¨',
                                    safetyTip: 'Î∞úÎí§ÍøàÏπòÍ∞Ä Î∞îÎã•ÏóêÏÑú Îñ®Ïñ¥ÏßÄÏßÄ ÏïäÎèÑÎ°ù Ïú†ÏßÄÌïòÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'ÎëîÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'Î∞îÎã•Ïóê ÏïâÏïÑ ÌïúÏ™Ω Îã§Î¶¨Î•º Î∞òÎåÄÏ™Ω Î¨¥Î¶é ÏúÑÏóê Ïò¨Î¶¨Í≥†, ÏÉÅÏ≤¥Î•º ÏïûÏúºÎ°ú ÏàôÏó¨ ÏóâÎç©Ïù¥ Í∑ºÏú°ÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                    targetMuscles: 'ÏóâÎç©Ïù¥',
                                    safetyTip: 'ÌóàÎ¶¨Î•º Íµ¨Î∂ÄÎ¶¨ÏßÄ ÎßêÍ≥† Í≥®Î∞òÏóêÏÑú ÏïûÏúºÎ°ú ÏàôÏù¥ÏÑ∏Ïöî.'
                                },
                                {
                                    name: 'Ïñ¥Íπ® & ÏÇºÎëêÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                    duration: 30,
                                    instructions: 'ÌïúÏ™Ω ÌåîÏùÑ Í∞ÄÏä¥ ÏïûÏúºÎ°ú ÍµêÏ∞®ÏãúÏºú Îã§Î•∏ ÌåîÎ°ú ÏßÄÌÉ±ÌïòÍ±∞ÎÇò, ÌåîÍøàÏπòÎ•º Íµ¨Î∂ÄÎ†§ Î®∏Î¶¨ Îí§Î°ú ÎÑòÍ≤® ÏÇºÎëêÍ∑ºÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                    targetMuscles: 'Ïñ¥Íπ®, ÏÇºÎëêÍ∑º',
                                    safetyTip: 'Î™©Ïóê Î¨¥Î¶¨Í∞Ä Í∞ÄÏßÄ ÏïäÎèÑÎ°ù Î∂ÄÎìúÎüΩÍ≤å ÏßÑÌñâÌïòÏÑ∏Ïöî.'
                                }
                            ]
                        }
                    ]
                }
            };

            // User profile setup
            const UserSetup = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.User />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">ÏÇ¨Ïö©Ïûê ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï</h2>
                        <p className="text-gray-600">ÏïàÏ†ÑÌïòÍ≥† Ìö®Í≥ºÏ†ÅÏù∏ Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÏúÑÌï¥ Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî</p>
                    </div>
                    
                    <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">ÎÇòÏù¥</label>
                            <select 
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                value={userProfile?.age || ""}
                                onChange={(e) => setUserProfile({...userProfile, age: e.target.value})}
                            >
                                <option value="">ÎÇòÏù¥Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                <option value="8-9">8-9ÏÑ∏</option>
                                <option value="10-12">10-12ÏÑ∏</option>
                                <option value="13-15">13-15ÏÑ∏</option>
                                <option value="16-18">16-18ÏÑ∏</option>
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">Ïä§ÏøºÏãú Í≤ΩÌóò</label>
                            <select 
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                value={userProfile?.experience || ""}
                                onChange={(e) => setUserProfile({...userProfile, experience: e.target.value})}
                            >
                                <option value="">Í≤ΩÌóò ÏàòÏ§ÄÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                                <option value="beginner">Ï¥àÍ∏â (1ÎÖÑ ÎØ∏Îßå)</option>
                                <option value="intermediate">Ï§ëÍ∏â (1-3ÎÖÑ)</option>
                                <option value="advanced">Í≥†Í∏â (3ÎÖÑ Ïù¥ÏÉÅ)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">ÌòÑÏû¨ Î∂ÄÏÉÅÏù¥ÎÇò ÌÜµÏ¶ùÏù¥ ÏûàÎäî Î∂ÄÏúÑ</label>
                            <div className="grid grid-cols-2 gap-2">
                                {['Î¨¥Î¶é', 'Î∞úÎ™©', 'ÌóàÎ¶¨', 'Ïñ¥Íπ®', 'ÏÜêÎ™©', 'ÏóÜÏùå'].map(injury => (
                                    <label key={injury} className="flex items-center">
                                        <input 
                                            type="checkbox" 
                                            className="mr-2 h-4 w-4 text-blue-600"
                                            checked={userProfile?.injuries?.includes(injury) || false}
                                            onChange={(e) => {
                                                const injuries = userProfile?.injuries || [];
                                                if (e.target.checked) {
                                                    setUserProfile({...userProfile, injuries: [...injuries, injury]});
                                                } else {
                                                    setUserProfile({...userProfile, injuries: injuries.filter(i => i !== injury)});
                                                }
                                            }}
                                        />
                                        {injury}
                                    </label>
                                ))}
                            </div>
                        </div>
                        
                        <button 
                            onClick={() => setCurrentScreen('main')}
                            disabled={!userProfile?.age || !userProfile?.experience}
                            className="w-full px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
                        >
                            ÌîÑÎ°úÌïÑ ÏôÑÎ£åÌïòÍ∏∞
                        </button>
                    </div>
                    
                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div className="flex items-start">
                            <Icons.AlertTriangle />
                            <div className="ml-2">
                                <h3 className="text-sm font-semibold text-yellow-800">Ï£ºÎãàÏñ¥ ÏÑ†Ïàò ÏïàÏ†Ñ ÏàòÏπô</h3>
                                <p className="text-sm text-yellow-700 mt-1">
                                    ÏÑ±Ïû•Í∏∞ ÏÑ†ÏàòÏùò ÏïàÏ†ÑÏùÑ ÏúÑÌï¥ ÌÜµÏ¶ùÏù¥ ÎäêÍª¥ÏßÄÎ©¥ Ï¶âÏãú Ï§ëÎã®ÌïòÍ≥†, Í≥ºÎèÑÌïú Ïä§Ìä∏Î†àÏπ≠ÏùÄ ÌîºÌï¥Ï£ºÏÑ∏Ïöî. 
                                    ÏÑ±Ïû•Ìåê Î≥¥Ìò∏Í∞Ä Í∞ÄÏû• Ï§ëÏöîÌï©ÎãàÎã§.
                                    {userProfile?.age === '8-9' && (
                                        <span className="block mt-2 font-semibold">
                                            ‚ö†Ô∏è 8-9ÏÑ∏ ÌäπÎ≥Ñ Ï£ºÏùò: ÎçîÏö± Î∂ÄÎìúÎüΩÍ≥† ÏßßÏùÄ ÏãúÍ∞ÑÏúºÎ°ú ÏßÑÌñâÌïòÎ©∞, Î∞òÎìúÏãú Î≥¥Ìò∏Ïûê ÏßÄÎèÑÌïòÏóê Ïã§ÏãúÌïòÏÑ∏Ïöî.
                                        </span>
                                    )}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Main menu
            const MainMenu = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠ Ï†ÑÎ¨∏ Ïï±</h1>
                        <p className="text-gray-600 mb-2">ÏïàÏ†ÑÌïòÍ≥† Í≥ºÌïôÏ†ÅÏù∏ Ïä§Ìä∏Î†àÏπ≠ÏúºÎ°ú Í≤ΩÍ∏∞Î†• Ìñ•ÏÉÅ</p>
                        {userProfile && (
                            <div className="flex items-center justify-center space-x-2">
                                <div className="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                    <Icons.User />
                                    <span className="ml-1">
                                        {userProfile.age} ‚Ä¢ {userProfile.experience === 'beginner' ? 'Ï¥àÍ∏â' : userProfile.experience === 'intermediate' ? 'Ï§ëÍ∏â' : 'Í≥†Í∏â'}
                                    </span>
                                </div>
                                <button
                                    onClick={() => {
                                        const resetProfile = confirm('ÌîÑÎ°úÌïÑÏùÑ Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå? ÏÇ¨Ïö©Ïûê ÏÑ§Ï†ïÏù¥ ÏÇ≠Ï†úÎê©ÎãàÎã§.');
                                        if (resetProfile) {
                                            const resetProgress = confirm('Ïö¥Îèô Í∏∞Î°ùÎèÑ Ìï®Íªò ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?');
                                            setUserProfile(null);
                                            localStorage.removeItem('userProfile');
                                            if (resetProgress) {
                                                setSessionProgress([]);
                                                localStorage.removeItem('sessionProgress');
                                            }
                                            setCurrentScreen('welcome');
                                        }
                                    }}
                                    className="p-1 text-gray-400 hover:text-gray-600 transition-colors"
                                    title="ÌîÑÎ°úÌïÑ Ï¥àÍ∏∞Ìôî"
                                >
                                    <Icons.Settings />
                                </button>
                            </div>
                        )}
                    </div>
                    
                    <div className="space-y-4">
                        <button 
                            onClick={() => startRoutine('warmup')}
                            className="routine-card w-full p-6 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"
                        >
                            <div className="flex items-center justify-between">
                                <div className="text-left">
                                    <h3 className="text-xl font-bold mb-1">Í≤ΩÍ∏∞ Ï†Ñ ÏõúÏóÖ</h3>
                                    <p className="text-emerald-100 text-sm">ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠ ‚Ä¢ 15-20Î∂Ñ</p>
                                    <p className="text-emerald-100 text-xs mt-1">3Îã®Í≥Ñ Í≥ºÌïôÏ†Å Ï§ÄÎπÑÏö¥Îèô</p>
                                </div>
                                <Icons.Play />
                            </div>
                        </button>
                        
                        <button 
                            onClick={() => startRoutine('cooldown')}
                            className="routine-card w-full p-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"
                        >
                            <div className="flex items-center justify-between">
                                <div className="text-left">
                                    <h3 className="text-xl font-bold mb-1">Í≤ΩÍ∏∞ ÌõÑ Ïø®Îã§Ïö¥</h3>
                                    <p className="text-blue-100 text-sm">Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠ ‚Ä¢ 15-20Î∂Ñ</p>
                                    <p className="text-blue-100 text-xs mt-1">Í∑ºÏú° Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ Ï¥âÏßÑ</p>
                                </div>
                                <Icons.Play />
                            </div>
                        </button>
                        
                        <div className="grid grid-cols-2 gap-4 mt-6">
                            <button 
                                onClick={() => setCurrentScreen('education')}
                                className="p-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors"
                            >
                                <Icons.BookOpen />
                                <div className="text-sm font-semibold text-gray-700 mt-2">ÍµêÏú° ÏÑºÌÑ∞</div>
                            </button>
                            
                            <button 
                                onClick={() => setCurrentScreen('progress')}
                                className="p-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors"
                            >
                                <Icons.TrendingUp />
                                <div className="text-sm font-semibold text-gray-700 mt-2">ÏßÑÌñâ ÏÉÅÌô©</div>
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Exercise screen
            const ExerciseScreen = () => {
                const phase = currentRoutine?.phases[currentPhase];
                const exercise = phase?.exercises[currentExercise];
                const totalExercises = currentRoutine?.phases.reduce((total, phase) => total + phase.exercises.length, 0);
                const completedExercises = currentRoutine?.phases.slice(0, currentPhase).reduce((total, phase) => total + phase.exercises.length, 0) + currentExercise;
                const progressPercentage = (completedExercises / totalExercises) * 100;

                const formatTime = (seconds) => {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                };

                return (
                    <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                        {/* Header */}
                        <div className="text-center">
                            <div className="flex items-center justify-center mb-2">
                                <div className={`w-3 h-3 rounded-full ${currentRoutine?.color} mr-2`}></div>
                                <h2 className="text-lg font-bold text-gray-800">{currentRoutine?.title}</h2>
                            </div>
                            <div className="text-sm text-gray-600">{phase?.name}</div>
                        </div>

                        {/* Progress bar */}
                        <div className="space-y-2">
                            <div className="flex justify-between text-sm text-gray-600">
                                <span>ÏßÑÌñâ ÏÉÅÌô©</span>
                                <span>{completedExercises}/{totalExercises}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className={`h-2 rounded-full transition-all duration-300 ${currentRoutine?.color}`}
                                    style={{ width: `${progressPercentage}%` }}
                                ></div>
                            </div>
                        </div>

                        {/* Exercise info */}
                        <div className="bg-gray-50 rounded-xl p-6">
                            <h3 className="text-xl font-bold text-gray-800 mb-2">{exercise?.name}</h3>
                            
                            {/* Timer */}
                            <div className="text-center my-6">
                                <div className={`timer-display ${isRunning ? 'pulse-animation' : ''}`}>
                                    {formatTime(timeRemaining)}
                                </div>
                                {exercise?.reps && (
                                    <div className="text-sm text-gray-600 mb-2">{exercise.reps}</div>
                                )}
                            </div>

                            {/* Instructions */}
                            <div className="space-y-3 text-sm">
                                <div>
                                    <span className="font-semibold text-gray-700">ÎèôÏûë Î∞©Î≤ï: </span>
                                    <span className="text-gray-600">{exercise?.instructions}</span>
                                </div>
                                
                                <div>
                                    <span className="font-semibold text-emerald-600">ÎåÄÏÉÅ Í∑ºÏú°: </span>
                                    <span className="text-gray-600">{exercise?.targetMuscles}</span>
                                </div>
                                
                                {exercise?.safetyTip && (
                                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                        <div className="flex items-start">
                                            <Icons.AlertTriangle />
                                            <div className="ml-2">
                                                <span className="font-semibold text-yellow-800">ÏïàÏ†Ñ ÏàòÏπô: </span>
                                                <span className="text-yellow-700">{exercise.safetyTip}</span>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="flex justify-center space-x-4">
                            <button 
                                onClick={previousExercise}
                                disabled={currentPhase === 0 && currentExercise === 0}
                                className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                            >
                                <Icons.SkipBack />
                            </button>
                            
                            <button 
                                onClick={() => setIsRunning(!isRunning)}
                                className={`px-6 py-2 ${isRunning ? 'bg-red-500 hover:bg-red-600' : 'bg-emerald-500 hover:bg-emerald-600'} text-white rounded-lg transition-colors`}
                            >
                                {isRunning ? <Icons.Pause /> : <Icons.Play />}
                            </button>
                            
                            <button 
                                onClick={nextExercise}
                                className="px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors"
                            >
                                <Icons.SkipForward />
                            </button>
                        </div>

                        <button 
                            onClick={() => setCurrentScreen('main')}
                            className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center"
                        >
                            <Icons.Home />
                            <span className="ml-2">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</span>
                        </button>
                    </div>
                );
            };

            // Completion screen
            const CompletionScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 text-center space-y-6 w-full max-w-md">
                    <Icons.CheckCircle />
                    <div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">Ïö¥Îèô ÏôÑÎ£å!</h2>
                        <p className="text-gray-600">ÌõåÎ•≠Ìï©ÎãàÎã§! Î™®Îì† Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÏôÑÎ£åÌñàÏäµÎãàÎã§.</p>
                    </div>
                    
                    <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 className="font-semibold text-green-800 mb-2">ÏôÑÎ£åÌïú Ïö¥Îèô</h3>
                        <p className="text-green-700">{currentRoutine?.title}</p>
                        <p className="text-sm text-green-600 mt-1">
                            {new Date().toLocaleDateString('ko-KR')} ÏôÑÎ£å
                        </p>
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors"
                    >
                        Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                    </button>
                </div>
            );

            // Education screen
            const EducationScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.BookOpen />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2 mt-4">ÍµêÏú° ÏÑºÌÑ∞</h2>
                        <p className="text-gray-600">Ïò¨Î∞îÎ•∏ Ïä§Ìä∏Î†àÏπ≠ Î∞©Î≤ïÏùÑ Î∞∞ÏõåÎ≥¥ÏÑ∏Ïöî</p>
                    </div>
                    
                    <div className="space-y-4">
                        <div className="bg-white border border-gray-200 rounded-lg p-4">
                            <h3 className="font-bold text-gray-800 mb-2">ÎèôÏ†Å vs Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠</h3>
                            <p className="text-sm text-gray-600">
                                <strong>ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠:</strong> Í≤ΩÍ∏∞ Ï†ÑÏóê Ïã§ÏãúÌïòÎ©∞, ÏõÄÏßÅÏù¥Î©¥ÏÑú Í∑ºÏú°ÏùÑ ÏòàÏó¥Ìï©ÎãàÎã§.<br/>
                                <strong>Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠:</strong> Í≤ΩÍ∏∞ ÌõÑÏóê Ïã§ÏãúÌïòÎ©∞, Í∑ºÏú°ÏùÑ Ïù¥ÏôÑÏãúÏºú ÌöåÎ≥µÏùÑ ÎèïÏäµÎãàÎã§.
                            </p>
                        </div>
                        
                        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h3 className="font-bold text-yellow-800 mb-2">Ï£ºÎãàÏñ¥ ÏÑ†Ïàò ÌäπÎ≥Ñ Ï£ºÏùòÏÇ¨Ìï≠</h3>
                            <ul className="text-sm text-yellow-700 space-y-1">
                                <li>‚Ä¢ ÏÑ±Ïû•Ìåê Î≥¥Ìò∏Î•º ÏúÑÌï¥ Í≥ºÎèÑÌïú Ïä§Ìä∏Î†àÏπ≠ Í∏àÏßÄ</li>
                                <li>‚Ä¢ ÌÜµÏ¶ùÏù¥ ÏïÑÎãå 'ÎãπÍ∏∞Îäî' ÎäêÎÇåÏóêÏÑú Î©àÏ∂îÍ∏∞</li>
                                <li>‚Ä¢ Î∞òÎèôÏùÑ Ïù¥Ïö©Ìïú Ïä§Ìä∏Î†àÏπ≠ Í∏àÏßÄ</li>
                                <li>‚Ä¢ Ï∂©Î∂ÑÌïú ÏàòÎ∂Ñ ÏÑ≠Ï∑® Î∞è Ìú¥Ïãù</li>
                            </ul>
                        </div>
                        
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 className="font-bold text-blue-800 mb-2">Ïä§ÏøºÏãú Î∂ÄÏÉÅ ÏòàÎ∞©</h3>
                            <ul className="text-sm text-blue-700 space-y-1">
                                <li>‚Ä¢ Í≤ΩÍ∏∞ Ï†Ñ Î∞òÎìúÏãú Ï∂©Î∂ÑÌïú ÏõúÏóÖ</li>
                                <li>‚Ä¢ Ïò¨Î∞îÎ•∏ Ïã†Î∞ú Ï∞©Ïö© (ÎÖºÏä¨Î¶Ω)</li>
                                <li>‚Ä¢ Ï†êÏßÑÏ†ÅÏù∏ ÌõàÎ†® Í∞ïÎèÑ Ï¶ùÍ∞Ä</li>
                                <li>‚Ä¢ Ï†ïÍ∏∞Ï†ÅÏù∏ Í∑ºÎ†• Ïö¥Îèô Î≥ëÌñâ</li>
                            </ul>
                        </div>
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                    >
                        Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                    </button>
                </div>
            );

            // Progress screen
            const ProgressScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.TrendingUp />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2 mt-4">ÏßÑÌñâ ÏÉÅÌô©</h2>
                        <p className="text-gray-600">ÎãπÏã†Ïùò Ïä§Ìä∏Î†àÏπ≠ Í∏∞Î°ùÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî</p>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-4">
                        <div className="bg-emerald-50 border border-emerald-200 rounded-lg p-4 text-center">
                            <div className="text-2xl font-bold text-emerald-600">{sessionProgress.length}</div>
                            <div className="text-sm text-emerald-700">ÏôÑÎ£åÌïú ÏÑ∏ÏÖò</div>
                        </div>
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                            <div className="text-2xl font-bold text-blue-600">
                                {sessionProgress.filter(s => s.routine.includes('ÏõúÏóÖ')).length}
                            </div>
                            <div className="text-sm text-blue-700">ÏõúÏóÖ ÏÑ∏ÏÖò</div>
                        </div>
                    </div>
                    
                    <div className="space-y-3">
                        <h3 className="font-bold text-gray-800">ÏµúÍ∑º ÌôúÎèô</h3>
                        {sessionProgress.length === 0 ? (
                            <p className="text-gray-500 text-center py-8">ÏïÑÏßÅ ÏôÑÎ£åÌïú ÏÑ∏ÏÖòÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                        ) : (
                            sessionProgress.slice(-5).map((session, index) => (
                                <div key={index} className="bg-white border border-gray-200 rounded-lg p-3">
                                    <div className="flex justify-between items-center">
                                        <span className="font-medium text-gray-800">{session.routine}</span>
                                        <span className="text-sm text-gray-500">
                                            {new Date(session.date).toLocaleDateString('ko-KR')}
                                        </span>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                    >
                        Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                    </button>
                </div>
            );

            // Timer logic
            useEffect(() => {
                let interval = null;
                if (isRunning && timeRemaining > 0) {
                    interval = setInterval(() => {
                        setTimeRemaining(time => {
                            if (time <= 1) {
                                setIsRunning(false);
                                return 0;
                            }
                            return time - 1;
                        });
                    }, 1000);
                } else if (timeRemaining === 0 && isRunning) {
                    setIsRunning(false);
                }
                return () => clearInterval(interval);
            }, [isRunning, timeRemaining]);

            // Exercise navigation
            const nextExercise = () => {
                const phase = currentRoutine?.phases[currentPhase];
                if (currentExercise < phase.exercises.length - 1) {
                    setCurrentExercise(currentExercise + 1);
                    setTimeRemaining(phase.exercises[currentExercise + 1].duration);
                } else if (currentPhase < currentRoutine.phases.length - 1) {
                    setCurrentPhase(currentPhase + 1);
                    setCurrentExercise(0);
                    setTimeRemaining(currentRoutine.phases[currentPhase + 1].exercises[0].duration);
                } else {
                    // Routine completed
                    const newSession = {
                        routine: currentRoutine.title,
                        date: new Date().toISOString(),
                        completed: true
                    };
                    setSessionProgress([...sessionProgress, newSession]);
                    setCurrentScreen('completed');
                }
                setIsRunning(false);
            };

            const previousExercise = () => {
                if (currentExercise > 0) {
                    setCurrentExercise(currentExercise - 1);
                    const phase = currentRoutine?.phases[currentPhase];
                    setTimeRemaining(phase.exercises[currentExercise - 1].duration);
                } else if (currentPhase > 0) {
                    setCurrentPhase(currentPhase - 1);
                    const prevPhase = currentRoutine?.phases[currentPhase - 1];
                    setCurrentExercise(prevPhase.exercises.length - 1);
                    setTimeRemaining(prevPhase.exercises[prevPhase.exercises.length - 1].duration);
                }
                setIsRunning(false);
            };

            const startRoutine = (routineType) => {
                const routine = routines[routineType];
                setCurrentRoutine(routine);
                setCurrentPhase(0);
                setCurrentExercise(0);
                setTimeRemaining(routine.phases[0].exercises[0].duration);
                setCurrentScreen('exercise');
                setIsRunning(false);
            };

            // Screen routing
            const renderScreen = () => {
                if (!userProfile) return <UserSetup />;
                
                switch (currentScreen) {
                    case 'main':
                        return <MainMenu />;
                    case 'exercise':
                        return <ExerciseScreen />;
                    case 'completed':
                        return <CompletionScreen />;
                    case 'education':
                        return <EducationScreen />;
                    case 'progress':
                        return <ProgressScreen />;
                    default:
                        return <MainMenu />;
                }
            };

            return renderScreen();
        };

        ReactDOM.render(<StretchingApp />, document.getElementById('root'));
    </script>

    <script>
        // PWA Installation Logic
        let deferredPrompt;
        const installButton = document.getElementById('installButton');
        const offlineIndicator = document.getElementById('offlineIndicator');

        // Check if app is already installed
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    installButton.style.display = 'none';
                }
                deferredPrompt = null;
            }
        });

        // Hide install button if already installed
        window.addEventListener('appinstalled', () => {
            installButton.style.display = 'none';
        });

        // Online/Offline status
        function updateOnlineStatus() {
            if (navigator.onLine) {
                offlineIndicator.style.display = 'none';
            } else {
                offlineIndicator.style.display = 'block';
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        updateOnlineStatus();

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            const swCode = `
                const CACHE_NAME = 'stretching-app-v1';
                const urlsToCache = [
                    '/',
                    'https://cdn.tailwindcss.com',
                    'https://unpkg.com/react@18/umd/react.development.js',
                    'https://unpkg.com/react-dom@18/umd/react-dom.development.js',
                    'https://unpkg.com/@babel/standalone/babel.min.js'
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(cache => cache.addAll(urlsToCache))
                    );
                });

                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request)
                            .then(response => {
                                if (response) {
                                    return response;
                                }
                                return fetch(event.request);
                            })
                    );
                });
            `;

            const blob = new Blob([swCode], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);

            navigator.serviceWorker.register(swUrl)
                .then(registration => {
                    console.log('Service Worker registered successfully');
                })
                .catch(error => {
                    console.log('Service Worker registration failed');
                });
        }

        // Prevent zoom on double tap (iOS Safari)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Prevent pull-to-refresh
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length !== 1) { return; }
            const firstTouch = e.touches[0];
            initialY = firstTouch.clientY;
        });

        document.addEventListener('touchmove', function(e) {
            if (e.touches.length !== 1) { return; }
            const currentY = e.touches[0].clientY;
            const diff = initialY - currentY;
            if (diff > 0) { return; }
            if (window.pageYOffset === 0) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
