<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ì£¼ë‹ˆì–´ ìŠ¤ì¿¼ì‹œ ì„ ìˆ˜ë¥¼ ìœ„í•œ ì „ë¬¸ ìŠ¤íŠ¸ë ˆì¹­ ì•±">
    <meta name="theme-color" content="#10b981">
    <title>ì£¼ë‹ˆì–´ ìŠ¤ì¿¼ì‹œ ìŠ¤íŠ¸ë ˆì¹­ ì•±</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuyjvOuLiOyWtCDsiqTsv7Dsovwg7Iqk7Yq47Ja27LmtIOyVsSIsCiAgInNob3J0X25hbWUiOiAi7Iqk7Yq47Ja2LSvp16IiLAogICJkZXNjcmlwdGlvbiI6ICLso7zri4jslrTtlJkg7Iqk7L+w7Iqs66qhIOyEoOyImOuluOyghCDsnbjtnZUg7KCV66y47LC9IOy8gOuUpCDsiqTtirjslrbs5Kcg7JWx7ISgIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjMTBiOTgxIiwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXhPVElpSUdobGFXZG9kRDBpTVRreUlqNEtJQ0E4Y21WamRDQjNhV1IwYUQwaU1Ua3lJaUJvWldsbmFIUTlJakU1TWlJZ1ptbHNiRDBpSXpFd1lqazRNU0lnY25nOUlqRXdJaUI1UFNJeE1DSWdkMmxrZEdnOUlqRTNNaUlnYUdWcFoyaDBQU0l4TnpJaUx6NEtJQ0E4ZFdOMGNpQjJaWEp6YVc5dVBTSXhMakVpSUdWdVkyOWthVzVuUFNKMWRHWXRPQ0krUGpFeU16UXVOQNM3OEtJQ0E4WnlCemRISnZhMlZmZDJsa2RHZzlJakVpSUhOMGNtOXJaUzB5YVc1bFkyRndQU0p5YjNWdVpDSWdjM1J5YjJ0bFBTSWpPRGswTXpFMUluOCtDbE02SjJOMGNtOXJaU0F6TkRNdU1UVXpJREkxTWk0ek5qWXVOQ0F6TmpBaUxqTWdNVGd5TGkwdE5EY3VPQ0F4TmpNdU55QTFNak11T0RBdE5EY3VPQ0E1T0M0NExqazBObEk4WnlCemRuUXRhWFJsY2owMWdpWjZNaWRqZEhKdmEyVTlJaUl5OEQiLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJMU1USWlJR2hsYVdkb2REMGlOVEV5SWo0S0lDQThjbVZqZENCM2FXUjBhRDBpTlRFeUlpQm9aV2xuYUhROUlqVXhNaUlnWm1sc2JEMGlJekV3WWprNE1TSWdjbmc5SWpJd0lpQjVQU0l5TUNJNGQybGtkR2c5SWpRMVlsTHVhbONvaGRYOGliMmhsYVdkb2REQWlOVEl6SWk4K0NpQWdQSFZPlbYjk5V1NPQWlNUzR4SmlCbGJXOXVaR2x1WnowaWRYUm1MVGdpTTRpdVpWdEFlV0JDYU9Ca2ZIOW9hN1kwWUFNNUIzMlFpeklyYUdjKzhhTnJCek9Td2RNcWpEQWpNcWRhN3lDUGRNYXlkbm9VZEhQRXRCdWVMK1JzT2ZvcCtFVDFHYzJTSlNTSFB6M1RLUWNsOEY5Q1QzUjdCZGlHYWZQcmdVUEFNdEQ0T3lGNlkzU0FqSXJESVBERG8yQVl5T1pMSFZUa005aTUwRGc3NHV1SWNyc2xRUkFhcnhKT1V3RDE1OXRkRThzNkJwOXcrUVRCcnZNbSs3UFNNSFpaOWR2aFQzRkx5ZnlydTJOdURqTy93REJOVHdVVXNqOXJzSWpJQWdJVzVGT2dGb2dBSzJJRGNjSDM2dEo1bklQMUd6NlMrdVdVY0hPUkRBZjQzUHVnSStBeXVPZU8xR2dJQUFBQWIzcDBVQUFBQVhSU1Rsbzh0NzU2a0dBQUFBQTFmUW1Iek1kYWZzeDJvQUJOSUFCZ1pIVlp1ZmJPSE9FK1BNK2ZsR2ZKR2ZxZDdlR3VTOWVhZWJkUk1oQXlzaStlTXVUazR5K2Vla3pWODl6bjNMN3VEanJyZGZVaXVsaWFhK084ODUrNDFOaTYzT085OTFQZVk4Qnh3K1RiTURaaVdXbUx3Zzhvc2l5b2lGV1NSdDJWTlZEZ01DbmdTa1NJczlUZkphTzRyVlU4WHIzSE5PQy9jb0FvUW9hbTI4RGhnZkUxNjE1bjh2SjdDV1lHOGNYZDlhOGVlM1BWanJJWnJwdlZhcWNtOElLb1FoM2tkTno2emhHNE1SZWZmZGFSME51c0x2dWVGcTJBK0E4N1l5MzFndWpoUGd4Y2xJRVdSblJQTUdhcmZoVTNZSUdCSElTaE9qS1FGUUJCSTlCcS9VNmNmSVVQQUJqU1FxSGdUenIvUElBNk8zZUdUZ0FBQUFCSlJVNUVya0pnZ2c9PSIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    
    <!-- CSS Framework -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        .app-container {
            max-width: 400px;
            margin: 0 auto;
            padding: 1rem;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .routine-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .routine-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .timer-display {
            font-size: 3rem;
            font-weight: 700;
            color: #374151;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        /* PWA Install Button */
        .install-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            cursor: pointer;
            display: none;
            z-index: 1000;
        }
        
        .install-button:hover {
            background: #059669;
            transform: translateY(-1px);
        }
        
        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #f59e0b;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: none;
            z-index: 1000;
        }
        
        /* Safe area for iOS */
        @supports (padding: max(0px)) {
            .app-container {
                padding-top: max(1rem, env(safe-area-inset-top));
                padding-bottom: max(1rem, env(safe-area-inset-bottom));
                padding-left: max(1rem, env(safe-area-inset-left));
                padding-right: max(1rem, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <!-- PWA Install Button -->
    <button id="installButton" class="install-button">
        ğŸ“± ì•± ì„¤ì¹˜í•˜ê¸°
    </button>
    
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator">
        âš ï¸ ì˜¤í”„ë¼ì¸ ëª¨ë“œ
    </div>
    
    <!-- App Container -->
    <div id="root" class="app-container"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;
        
        // Icons components (simplified SVG icons)
        const Icons = {
            User: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            Play: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1.5a2.5 2.5 0 110 5H9m6-5h1.5a2.5 2.5 0 110 5H15M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Pause: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            Settings: () => (
                <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            ),
            AlertTriangle: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
                </svg>
            ),
            Home: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
            ),
            SkipForward: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 5l7 7-7 7M5 5l7 7-7 7" />
                </svg>
            ),
            SkipBack: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
                </svg>
            ),
            CheckCircle: () => (
                <svg className="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            BookOpen: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                </svg>
            ),
            TrendingUp: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
            )
        };

        const StretchingApp = () => {
            // State management with localStorage persistence
            const [currentScreen, setCurrentScreen] = useState('welcome');
            const [userProfile, setUserProfile] = useState(() => {
                const saved = localStorage.getItem('userProfile');
                return saved ? JSON.parse(saved) : null;
            });
            const [currentRoutine, setCurrentRoutine] = useState(null);
            const [currentPhase, setCurrentPhase] = useState(0);
            const [currentExercise, setCurrentExercise] = useState(0);
            const [timeRemaining, setTimeRemaining] = useState(0);
            const [isRunning, setIsRunning] = useState(false);
            const [sessionProgress, setSessionProgress] = useState(() => {
                const saved = localStorage.getItem('sessionProgress');
                return saved ? JSON.parse(saved) : [];
            });

            // Save to localStorage when state changes
            useEffect(() => {
                if (userProfile) {
                    localStorage.setItem('userProfile', JSON.stringify(userProfile));
                    setCurrentScreen('main');
                }
            }, [userProfile]);

            useEffect(() => {
                localStorage.setItem('sessionProgress', JSON.stringify(sessionProgress));
            }, [sessionProgress]);

            // Exercise data
            const routines = {
                warmup: {
                    title: 'ê²½ê¸° ì „ ì›œì—… (ë™ì  ìŠ¤íŠ¸ë ˆì¹­)',
                    description: 'ìŠ¤ì¿¼ì‹œ ê²½ê¸°ë¥¼ ìœ„í•œ 3ë‹¨ê³„ ê³¼í•™ì  ì¤€ë¹„ìš´ë™',
                    color: 'bg-emerald-500',
                    phases: [
                        {
                            name: '1ë‹¨ê³„: ì¼ë°˜ì  í™œì„±í™”',
                            description: 'ì‹¬ë°•ìˆ˜ ìƒìŠ¹ ë° ì²´ì˜¨ ì¡°ì ˆ',
                            exercises: [
                                {
                                    name: 'ê°€ë²¼ìš´ ì¡°ê¹… & ì í•‘ì­',
                                    duration: 180,
                                    instructions: 'ì½”íŠ¸ ì£¼ë³€ì„ ê°€ë³ê²Œ ì¡°ê¹…í•˜ê±°ë‚˜ ì œìë¦¬ì—ì„œ ì í•‘ì­ì„ ì‹¤ì‹œí•˜ì—¬ ëª¸ì„ ì˜ˆì—´í•˜ì„¸ìš”. ìˆ¨ì´ ì•½ê°„ ì°° ì •ë„ì˜ ê°•ë„ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.',
                                    targetMuscles: 'ì „ì‹ , ì‹¬íì§€êµ¬ë ¥',
                                    safetyTip: 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì›€ì§ì„ì€ í”¼í•˜ê³  ì ì§„ì ìœ¼ë¡œ ê°•ë„ë¥¼ ë†’ì´ì„¸ìš”.'
                                },
                                {
                                    name: 'íŒ” ëŒë¦¬ê¸° & ì–´ê¹¨ í’€ê¸°',
                                    duration: 120,
                                    instructions: 'ì•ìœ¼ë¡œ, ë’¤ë¡œ í¬ê²Œ ì›ì„ ê·¸ë¦¬ë©° ì–´ê¹¨ë¥¼ í’€ì–´ì¤ë‹ˆë‹¤. ì‘ì€ ì›ì—ì„œ ì‹œì‘í•˜ì—¬ ì ì°¨ í¬ê²Œ ë§Œë“œì„¸ìš”.',
                                    targetMuscles: 'ì–´ê¹¨, ìƒì²´',
                                    safetyTip: 'ì–´ê¹¨ì— í†µì¦ì´ ìˆë‹¤ë©´ ì‘ì€ ë²”ìœ„ì—ì„œ ì‹œì‘í•˜ì„¸ìš”.'
                                }
                            ]
                        },
                        {
                            name: '2ë‹¨ê³„: ì „ì‹  ê°€ë™ì„± í™•ë³´',
                            description: 'ê´€ì ˆ ê°€ë™ë²”ìœ„ ì¦ëŒ€ ë° ê·¼ìœ¡ í™œì„±í™”',
                            exercises: [
                                {
                                    name: 'ëª¸í†µ í’ì°¨ ëŒë¦¬ê¸°',
                                    duration: 60,
                                    instructions: 'ì–‘ ë‹¤ë¦¬ë¥¼ ì–´ê¹¨ë„ˆë¹„ë¡œ ë²Œë¦¬ê³  ì„  í›„, í—ˆë¦¬ë¥¼ ìˆ™ì—¬ ì™¼íŒ”ì„ ì˜¤ë¥¸ë°œ ìª½ìœ¼ë¡œ, ì˜¤ë¥¸íŒ”ì€ í•˜ëŠ˜ë¡œ ë»—ì–´ êµì°¨ ë™ì‘ì„ 20-30íšŒ ë°˜ë³µí•©ë‹ˆë‹¤.',
                                    targetMuscles: 'ëª¸í†µ, ë“±, í—ˆë¦¬',
                                    safetyTip: 'ê³¼ë„í•œ ë°˜ë™ì€ ê¸ˆì§€. ë¶€ë“œëŸ½ê³  í†µì œëœ ì›€ì§ì„ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.',
                                    reps: '20-30íšŒ'
                                },
                                {
                                    name: 'ë‹¤ë¦¬ ì•ë’¤ & ì¢Œìš° í”ë“¤ê¸°',
                                    duration: 120,
                                    instructions: 'ë²½ì´ë‚˜ íŒŒíŠ¸ë„ˆë¥¼ ì¡ê³  ê· í˜•ì„ ìœ ì§€í•˜ë©° í•œìª½ ë‹¤ë¦¬ë¥¼ ì•ë’¤ë¡œ, ê·¸ë‹¤ìŒ ì¢Œìš°ë¡œ ë¶€ë“œëŸ½ê²Œ í”ë“­ë‹ˆë‹¤.',
                                    targetMuscles: 'í–„ìŠ¤íŠ¸ë§, ì—‰ë©ì´ êµ´ê³¡ê·¼',
                                    safetyTip: 'ê· í˜•ì„ ìƒì§€ ì•Šë„ë¡ ì§€ì§€ëŒ€ë¥¼ í™œìš©í•˜ì„¸ìš”.'
                                },
                                {
                                    name: 'í•˜ì´ ë‹ˆ & ë²„íŠ¸ í‚¥',
                                    duration: 60,
                                    instructions: 'ì œìë¦¬ì—ì„œ ê°€ë³ê²Œ ë›°ë©´ì„œ ë¬´ë¦ì„ ê°€ìŠ´ ë†’ì´ê¹Œì§€ ì˜¬ë¦¬ëŠ” í•˜ì´ ë‹ˆì™€ ë°œë’¤ê¿ˆì¹˜ë¥¼ ì—‰ë©ì´ë¡œ ì°¨ëŠ” ë²„íŠ¸ í‚¥ì„ ë²ˆê°ˆì•„ ì§„í–‰í•©ë‹ˆë‹¤.',
                                    targetMuscles: 'ëŒ€í‡´ì‚¬ë‘ê·¼, í–„ìŠ¤íŠ¸ë§, ë‘”ê·¼',
                                    safetyTip: 'ì°©ì§€ ì‹œ ë¬´ë¦ì— ë¬´ë¦¬ê°€ ê°€ì§€ ì•Šë„ë¡ ë¶€ë“œëŸ½ê²Œ ì°©ì§€í•˜ì„¸ìš”.'
                                },
                                {
                                    name: 'ê³ ê´€ì ˆ íšŒì „ ìš´ë™',
                                    duration: 90,
                                    instructions: 'ë¬´ë¦ì„ 90ë„ë¡œ ë“¤ì–´ì˜¬ë ¤ ë°”ê¹¥ ë°©í–¥ìœ¼ë¡œ ì›ì„ ê·¸ë¦¬ë“¯ íšŒì „ì‹œí‚µë‹ˆë‹¤. ì—‰ë©ì´ ê´€ì ˆì˜ ê°€ë™ì„±ì„ ë†’ì…ë‹ˆë‹¤.',
                                    targetMuscles: 'ê³ ê´€ì ˆ, ì—‰ë©ì´',
                                    safetyTip: 'í†µì¦ì´ ëŠê»´ì§€ë©´ íšŒì „ ë²”ìœ„ë¥¼ ì¤„ì´ì„¸ìš”.'
                                }
                            ]
                        },
                        {
                            name: '3ë‹¨ê³„: ìŠ¤ì¿¼ì‹œ íŠ¹ì • ë™ì‘ í™œì„±í™”',
                            description: 'ì‹¤ì œ ê²½ê¸° ë™ì‘ ëª¨ë°© ë° ê·¼ì‹ ê²½ í™œì„±í™”',
                            exercises: [
                                {
                                    name: 'ê³ ìŠ¤íŒ… (Ghosting) í›ˆë ¨',
                                    duration: 300,
                                    instructions: 'ë¼ì¼“ì„ ë“¤ê³  ì½”íŠ¸ì˜ ë„¤ ê·€í‰ì´ì™€ ì¤‘ì•™ T-ì¡´ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì´ë™í•˜ë©° ëŸ°ì§€ ìì„¸ë¡œ ê°€ìƒì˜ ê³µì„ ì¹˜ëŠ” ë™ì‘ì„ ì—°ìŠµí•©ë‹ˆë‹¤.',
                                    targetMuscles: 'ì „ì‹  (ê²½ê¸° íŠ¹í™”)',
                                    safetyTip: 'ì¶©ë¶„í•œ ê³µê°„ì„ í™•ë³´í•˜ê³  ë¯¸ë„ëŸ¬ì§€ì§€ ì•ŠëŠ” ì‹ ë°œì„ ì°©ìš©í•˜ì„¸ìš”.'
                                }
                            ]
                        }
                    ]
                },
                cooldown: {
                    title: 'ê²½ê¸° í›„ ì¿¨ë‹¤ìš´ (ì •ì  ìŠ¤íŠ¸ë ˆì¹­)',
                    description: 'ê·¼ìœ¡ ì´ì™„ ë° íšŒë³µ ì´‰ì§„ì„ ìœ„í•œ ì²´ê³„ì  ì •ë¦¬ìš´ë™',
                    color: 'bg-blue-500',
                    phases: [
                        {
                            name: '1ë‹¨ê³„: ì ì§„ì  ì‹¬ë°•ìˆ˜ ê°ì†Œ',
                            description: 'ê²½ê¸° í›„ ì•ˆì „í•œ ì‹¬ë°•ìˆ˜ ì •ìƒí™”',
                            exercises: [
                                {
                                    name: 'ì²œì²œíˆ ê±·ê¸°',
                                    duration: 180,
                                    instructions: 'ì½”íŠ¸ë¥¼ ì²œì²œíˆ ê±¸ìœ¼ë©° í˜¸í¡ì„ ì •ìƒí™”í•˜ê³  ì‹¬ë°•ìˆ˜ë¥¼ ì ì§„ì ìœ¼ë¡œ ë‚®ì¶¥ë‹ˆë‹¤. ê°‘ì‘ìŠ¤ëŸ½ê²Œ ë©ˆì¶”ì§€ ë§ˆì„¸ìš”.',
                                    targetMuscles: 'ì‹¬íê¸°ëŠ¥ ì •ìƒí™”',
                                    safetyTip: 'ì–´ì§€ëŸ¬ì›€ì´ ëŠê»´ì§€ë©´ ì¦‰ì‹œ ì•‰ì•„ì„œ íœ´ì‹í•˜ì„¸ìš”.'
                                }
                            ]
                        },
                        {
                            name: '2ë‹¨ê³„: ì£¼ìš” ê·¼ìœ¡êµ° ì •ì  ìŠ¤íŠ¸ë ˆì¹­',
                            description: 'ê²½ê¸°ë¡œ ê¸´ì¥ëœ ê·¼ìœ¡ì˜ ì´ì™„ ë° íšŒë³µ',
                            exercises: [
                                {
                                    name: 'í–„ìŠ¤íŠ¸ë§ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'ë°”ë‹¥ì— ì•‰ì•„ ë‹¤ë¦¬ë¥¼ ê³§ê²Œ ë»—ê³  ìƒì²´ë¥¼ ì•ìœ¼ë¡œ ìˆ™ì´ê±°ë‚˜, ëˆ„ìš´ ìì„¸ì—ì„œ í•œìª½ ë‹¤ë¦¬ë¥¼ ê°€ìŠ´ìœ¼ë¡œ ë‹¹ê²¨ í—ˆë²…ì§€ ë’¤ìª½ì„ ëŠ˜ë¦½ë‹ˆë‹¤.',
                                    targetMuscles: 'í—ˆë²…ì§€ ë’¤ìª½',
                                    safetyTip: 'ë°˜ë™ì„ ì£¼ì§€ ë§ê³  ë¶€ë“œëŸ½ê²Œ ëŠ˜ë ¤ì£¼ì„¸ìš”. í†µì¦ì´ ì•„ë‹Œ ë‹¹ê¸°ëŠ” ëŠë‚Œì— ì§‘ì¤‘í•˜ì„¸ìš”.'
                                },
                                {
                                    name: 'ëŒ€í‡´ì‚¬ë‘ê·¼ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'ì„  ìì„¸ì—ì„œ ë²½ì„ ì§šê³  í•œìª½ ë‹¤ë¦¬ë¥¼ ë’¤ë¡œ êµ¬ë¶€ë ¤ ì†ìœ¼ë¡œ ì¡ê³ , ë°œë’¤ê¿ˆì¹˜ë¥¼ ì—‰ë©ì´ ìª½ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ë‹¹ê¹ë‹ˆë‹¤.',
                                    targetMuscles: 'í—ˆë²…ì§€ ì•ìª½',
                                    safetyTip: 'ë¬´ë¦ì´ ë°”ê¹¥ìª½ìœ¼ë¡œ ë²Œì–´ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ê³ , í—ˆë¦¬ê°€ ê³¼ë„í•˜ê²Œ êº¾ì´ì§€ ì•Šê²Œ í•˜ì„¸ìš”.'
                                },
                                {
                                    name: 'ì¥ìš”ê·¼ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'ëŸ°ì§€ ìì„¸ì—ì„œ ë’¤ìª½ ë¬´ë¦ì„ ë°”ë‹¥ì— ëŒ€ê³ , ê³¨ë°˜ì„ ì•ìœ¼ë¡œ ë¶€ë“œëŸ½ê²Œ ë°€ì–´ í—ˆë²…ì§€ ì•ìª½ê³¼ ê³¨ë°˜ ì•ìª½ì„ ëŠ˜ë¦½ë‹ˆë‹¤.',
                                    targetMuscles: 'ì—‰ë©ì´ êµ´ê³¡ê·¼, ê³¨ë°˜',
                                    safetyTip: 'í—ˆë¦¬ê°€ ê³¼ë„í•˜ê²Œ êº¾ì´ì§€ ì•Šë„ë¡ ë³µë¶€ì— ì‚´ì§ í˜ì„ ì£¼ì„¸ìš”.'
                                },
                                {
                                    name: 'ì¢…ì•„ë¦¬ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'ë²½ì„ ì§šê³  í•œ ë°œì„ ë’¤ë¡œ ë»—ì–´ ë°œë’¤ê¿ˆì¹˜ë¥¼ ë°”ë‹¥ì— ì§€ê·¸ì‹œ ëˆ„ë¥´ë©° ì¢…ì•„ë¦¬ ê·¼ìœ¡ì„ ëŠ˜ë¦½ë‹ˆë‹¤.',
                                    targetMuscles: 'ì¢…ì•„ë¦¬',
                                    safetyTip: 'ë°œë’¤ê¿ˆì¹˜ê°€ ë°”ë‹¥ì—ì„œ ë–¨ì–´ì§€ì§€ ì•Šë„ë¡ ìœ ì§€í•˜ì„¸ìš”.'
                                },
                                {
                                    name: 'ë‘”ê·¼ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'ë°”ë‹¥ì— ì•‰ì•„ í•œìª½ ë‹¤ë¦¬ë¥¼ ë°˜ëŒ€ìª½ ë¬´ë¦ ìœ„ì— ì˜¬ë¦¬ê³ , ìƒì²´ë¥¼ ì•ìœ¼ë¡œ ìˆ™ì—¬ ì—‰ë©ì´ ê·¼ìœ¡ì„ ëŠ˜ë¦½ë‹ˆë‹¤.',
                                    targetMuscles: 'ì—‰ë©ì´',
                                    safetyTip: 'í—ˆë¦¬ë¥¼ êµ¬ë¶€ë¦¬ì§€ ë§ê³  ê³¨ë°˜ì—ì„œ ì•ìœ¼ë¡œ ìˆ™ì´ì„¸ìš”.'
                                },
                                {
                                    name: 'ì–´ê¹¨ & ì‚¼ë‘ê·¼ ìŠ¤íŠ¸ë ˆì¹­',
                                    duration: 30,
                                    instructions: 'í•œìª½ íŒ”ì„ ê°€ìŠ´ ì•ìœ¼ë¡œ êµì°¨ì‹œì¼œ ë‹¤ë¥¸ íŒ”ë¡œ ì§€íƒ±í•˜ê±°ë‚˜, íŒ”ê¿ˆì¹˜ë¥¼ êµ¬ë¶€ë ¤ ë¨¸ë¦¬ ë’¤ë¡œ ë„˜ê²¨ ì‚¼ë‘ê·¼ì„ ëŠ˜ë¦½ë‹ˆë‹¤.',
                                    targetMuscles: 'ì–´ê¹¨, ì‚¼ë‘ê·¼',
                                    safetyTip: 'ëª©ì— ë¬´ë¦¬ê°€ ê°€ì§€ ì•Šë„ë¡ ë¶€ë“œëŸ½ê²Œ ì§„í–‰í•˜ì„¸ìš”.'
                                }
                            ]
                        }
                    ]
                }
            };

            // User profile setup
            const UserSetup = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.User />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">ì‚¬ìš©ì í”„ë¡œí•„ ì„¤ì •</h2>
                        <p className="text-gray-600">ì•ˆì „í•˜ê³  íš¨ê³¼ì ì¸ ìŠ¤íŠ¸ë ˆì¹­ì„ ìœ„í•´ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                    </div>
                    
                    <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">ë‚˜ì´</label>
                            <select 
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                value={userProfile?.age || ""}
                                onChange={(e) => setUserProfile({...userProfile, age: e.target.value})}
                            >
                                <option value="">ë‚˜ì´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="8-9">8-9ì„¸</option>
                                <option value="10-12">10-12ì„¸</option>
                                <option value="13-15">13-15ì„¸</option>
                                <option value="16-18">16-18ì„¸</option>
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">ìŠ¤ì¿¼ì‹œ ê²½í—˜</label>
                            <select 
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                value={userProfile?.experience || ""}
                                onChange={(e) => setUserProfile({...userProfile, experience: e.target.value})}
                            >
                                <option value="">ê²½í—˜ ìˆ˜ì¤€ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="beginner">ì´ˆê¸‰ (1ë…„ ë¯¸ë§Œ)</option>
                                <option value="intermediate">ì¤‘ê¸‰ (1-3ë…„)</option>
                                <option value="advanced">ê³ ê¸‰ (3ë…„ ì´ìƒ)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-semibold text-gray-700 mb-2">í˜„ì¬ ë¶€ìƒì´ë‚˜ í†µì¦ì´ ìˆëŠ” ë¶€ìœ„</label>
                            <div className="grid grid-cols-2 gap-2">
                                {['ë¬´ë¦', 'ë°œëª©', 'í—ˆë¦¬', 'ì–´ê¹¨', 'ì†ëª©', 'ì—†ìŒ'].map(injury => (
                                    <label key={injury} className="flex items-center">
                                        <input 
                                            type="checkbox" 
                                            className="mr-2 h-4 w-4 text-blue-600"
                                            checked={userProfile?.injuries?.includes(injury) || false}
                                            onChange={(e) => {
                                                const injuries = userProfile?.injuries || [];
                                                if (e.target.checked) {
                                                    setUserProfile({...userProfile, injuries: [...injuries, injury]});
                                                } else {
                                                    setUserProfile({...userProfile, injuries: injuries.filter(i => i !== injury)});
                                                }
                                            }}
                                        />
                                        {injury}
                                    </label>
                                ))}
                            </div>
                        </div>
                        
                        <button 
                            onClick={() => setCurrentScreen('main')}
                            disabled={!userProfile?.age || !userProfile?.experience}
                            className="w-full px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors"
                        >
                            í”„ë¡œí•„ ì™„ë£Œí•˜ê¸°
                        </button>
                    </div>
                    
                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div className="flex items-start">
                            <Icons.AlertTriangle />
                            <div className="ml-2">
                                <h3 className="text-sm font-semibold text-yellow-800">ì£¼ë‹ˆì–´ ì„ ìˆ˜ ì•ˆì „ ìˆ˜ì¹™</h3>
                                <p className="text-sm text-yellow-700 mt-1">
                                    ì„±ì¥ê¸° ì„ ìˆ˜ì˜ ì•ˆì „ì„ ìœ„í•´ í†µì¦ì´ ëŠê»´ì§€ë©´ ì¦‰ì‹œ ì¤‘ë‹¨í•˜ê³ , ê³¼ë„í•œ ìŠ¤íŠ¸ë ˆì¹­ì€ í”¼í•´ì£¼ì„¸ìš”. 
                                    ì„±ì¥íŒ ë³´í˜¸ê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.
                                    {userProfile?.age === '8-9' && (
                                        <span className="block mt-2 font-semibold">
                                            âš ï¸ 8-9ì„¸ íŠ¹ë³„ ì£¼ì˜: ë”ìš± ë¶€ë“œëŸ½ê³  ì§§ì€ ì‹œê°„ìœ¼ë¡œ ì§„í–‰í•˜ë©°, ë°˜ë“œì‹œ ë³´í˜¸ì ì§€ë„í•˜ì— ì‹¤ì‹œí•˜ì„¸ìš”.
                                        </span>
                                    )}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Main menu
            const MainMenu = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">ìŠ¤ì¿¼ì‹œ ìŠ¤íŠ¸ë ˆì¹­ ì „ë¬¸ ì•±</h1>
                        <p className="text-gray-600 mb-2">ì•ˆì „í•˜ê³  ê³¼í•™ì ì¸ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ê²½ê¸°ë ¥ í–¥ìƒ</p>
                        {userProfile && (
                            <div className="flex items-center justify-center space-x-2">
                                <div className="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                    <Icons.User />
                                    <span className="ml-1">
                                        {userProfile.age} â€¢ {userProfile.experience === 'beginner' ? 'ì´ˆê¸‰' : userProfile.experience === 'intermediate' ? 'ì¤‘ê¸‰' : 'ê³ ê¸‰'}
                                    </span>
                                </div>
                                <button
                                    onClick={() => {
                                        const resetProfile = confirm('í”„ë¡œí•„ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì‚¬ìš©ì ì„¤ì •ì´ ì‚­ì œë©ë‹ˆë‹¤.');
                                        if (resetProfile) {
                                            const resetProgress = confirm('ìš´ë™ ê¸°ë¡ë„ í•¨ê»˜ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
                                            setUserProfile(null);
                                            localStorage.removeItem('userProfile');
                                            if (resetProgress) {
                                                setSessionProgress([]);
                                                localStorage.removeItem('sessionProgress');
                                            }
                                            setCurrentScreen('welcome');
                                        }
                                    }}
                                    className="p-1 text-gray-400 hover:text-gray-600 transition-colors"
                                    title="í”„ë¡œí•„ ì´ˆê¸°í™”"
                                >
                                    <Icons.Settings />
                                </button>
                            </div>
                        )}
                    </div>
                    
                    <div className="space-y-4">
                        <button 
                            onClick={() => startRoutine('warmup')}
                            className="routine-card w-full p-6 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"
                        >
                            <div className="flex items-center justify-between">
                                <div className="text-left">
                                    <h3 className="text-xl font-bold mb-1">ê²½ê¸° ì „ ì›œì—…</h3>
                                    <p className="text-emerald-100 text-sm">ë™ì  ìŠ¤íŠ¸ë ˆì¹­ â€¢ 15-20ë¶„</p>
                                    <p className="text-emerald-100 text-xs mt-1">3ë‹¨ê³„ ê³¼í•™ì  ì¤€ë¹„ìš´ë™</p>
                                </div>
                                <Icons.Play />
                            </div>
                        </button>
                        
                        <button 
                            onClick={() => startRoutine('cooldown')}
                            className="routine-card w-full p-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-200"
                        >
                            <div className="flex items-center justify-between">
                                <div className="text-left">
                                    <h3 className="text-xl font-bold mb-1">ê²½ê¸° í›„ ì¿¨ë‹¤ìš´</h3>
                                    <p className="text-blue-100 text-sm">ì •ì  ìŠ¤íŠ¸ë ˆì¹­ â€¢ 15-20ë¶„</p>
                                    <p className="text-blue-100 text-xs mt-1">ê·¼ìœ¡ ì´ì™„ ë° íšŒë³µ ì´‰ì§„</p>
                                </div>
                                <Icons.Play />
                            </div>
                        </button>
                        
                        <div className="grid grid-cols-2 gap-4 mt-6">
                            <button 
                                onClick={() => setCurrentScreen('education')}
                                className="p-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors"
                            >
                                <Icons.BookOpen />
                                <div className="text-sm font-semibold text-gray-700 mt-2">êµìœ¡ ì„¼í„°</div>
                            </button>
                            
                            <button 
                                onClick={() => setCurrentScreen('progress')}
                                className="p-4 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors"
                            >
                                <Icons.TrendingUp />
                                <div className="text-sm font-semibold text-gray-700 mt-2">ì§„í–‰ ìƒí™©</div>
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Exercise screen
            const ExerciseScreen = () => {
                const phase = currentRoutine?.phases[currentPhase];
                const exercise = phase?.exercises[currentExercise];
                const totalExercises = currentRoutine?.phases.reduce((total, phase) => total + phase.exercises.length, 0);
                const completedExercises = currentRoutine?.phases.slice(0, currentPhase).reduce((total, phase) => total + phase.exercises.length, 0) + currentExercise;
                const progressPercentage = (completedExercises / totalExercises) * 100;

                const formatTime = (seconds) => {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                };

                return (
                    <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                        {/* Header */}
                        <div className="text-center">
                            <div className="flex items-center justify-center mb-2">
                                <div className={`w-3 h-3 rounded-full ${currentRoutine?.color} mr-2`}></div>
                                <h2 className="text-lg font-bold text-gray-800">{currentRoutine?.title}</h2>
                            </div>
                            <div className="text-sm text-gray-600">{phase?.name}</div>
                        </div>

                        {/* Progress bar */}
                        <div className="space-y-2">
                            <div className="flex justify-between text-sm text-gray-600">
                                <span>ì§„í–‰ ìƒí™©</span>
                                <span>{completedExercises}/{totalExercises}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div 
                                    className={`h-2 rounded-full transition-all duration-300 ${currentRoutine?.color}`}
                                    style={{ width: `${progressPercentage}%` }}
                                ></div>
                            </div>
                        </div>

                        {/* Exercise info */}
                        <div className="bg-gray-50 rounded-xl p-6">
                            <h3 className="text-xl font-bold text-gray-800 mb-2">{exercise?.name}</h3>
                            
                            {/* Timer */}
                            <div className="text-center my-6">
                                <div className={`timer-display ${isRunning ? 'pulse-animation' : ''}`}>
                                    {formatTime(timeRemaining)}
                                </div>
                                {exercise?.reps && (
                                    <div className="text-sm text-gray-600 mb-2">{exercise.reps}</div>
                                )}
                            </div>

                            {/* Instructions */}
                            <div className="space-y-3 text-sm">
                                <div>
                                    <span className="font-semibold text-gray-700">ë™ì‘ ë°©ë²•: </span>
                                    <span className="text-gray-600">{exercise?.instructions}</span>
                                </div>
                                
                                <div>
                                    <span className="font-semibold text-emerald-600">ëŒ€ìƒ ê·¼ìœ¡: </span>
                                    <span className="text-gray-600">{exercise?.targetMuscles}</span>
                                </div>
                                
                                {exercise?.safetyTip && (
                                    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                        <div className="flex items-start">
                                            <Icons.AlertTriangle />
                                            <div className="ml-2">
                                                <span className="font-semibold text-yellow-800">ì•ˆì „ ìˆ˜ì¹™: </span>
                                                <span className="text-yellow-700">{exercise.safetyTip}</span>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="flex justify-center space-x-4">
                            <button 
                                onClick={previousExercise}
                                disabled={currentPhase === 0 && currentExercise === 0}
                                className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                            >
                                <Icons.SkipBack />
                            </button>
                            
                            <button 
                                onClick={() => setIsRunning(!isRunning)}
                                className={`px-6 py-2 ${isRunning ? 'bg-red-500 hover:bg-red-600' : 'bg-emerald-500 hover:bg-emerald-600'} text-white rounded-lg transition-colors`}
                            >
                                {isRunning ? <Icons.Pause /> : <Icons.Play />}
                            </button>
                            
                            <button 
                                onClick={nextExercise}
                                className="px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors"
                            >
                                <Icons.SkipForward />
                            </button>
                        </div>

                        <button 
                            onClick={() => setCurrentScreen('main')}
                            className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center"
                        >
                            <Icons.Home />
                            <span className="ml-2">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
                        </button>
                    </div>
                );
            };

            // Completion screen
            const CompletionScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 text-center space-y-6 w-full max-w-md">
                    <Icons.CheckCircle />
                    <div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">ìš´ë™ ì™„ë£Œ!</h2>
                        <p className="text-gray-600">í›Œë¥­í•©ë‹ˆë‹¤! ëª¨ë“  ìŠ¤íŠ¸ë ˆì¹­ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.</p>
                    </div>
                    
                    <div className="bg-green-50 border border-green-200 rounded-lg p-4">
                        <h3 className="font-semibold text-green-800 mb-2">ì™„ë£Œí•œ ìš´ë™</h3>
                        <p className="text-green-700">{currentRoutine?.title}</p>
                        <p className="text-sm text-green-600 mt-1">
                            {new Date().toLocaleDateString('ko-KR')} ì™„ë£Œ
                        </p>
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-6 py-3 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600 transition-colors"
                    >
                        ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            );

            // Education screen
            const EducationScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.BookOpen />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2 mt-4">êµìœ¡ ì„¼í„°</h2>
                        <p className="text-gray-600">ì˜¬ë°”ë¥¸ ìŠ¤íŠ¸ë ˆì¹­ ë°©ë²•ì„ ë°°ì›Œë³´ì„¸ìš”</p>
                    </div>
                    
                    <div className="space-y-4">
                        <div className="bg-white border border-gray-200 rounded-lg p-4">
                            <h3 className="font-bold text-gray-800 mb-2">ë™ì  vs ì •ì  ìŠ¤íŠ¸ë ˆì¹­</h3>
                            <p className="text-sm text-gray-600">
                                <strong>ë™ì  ìŠ¤íŠ¸ë ˆì¹­:</strong> ê²½ê¸° ì „ì— ì‹¤ì‹œí•˜ë©°, ì›€ì§ì´ë©´ì„œ ê·¼ìœ¡ì„ ì˜ˆì—´í•©ë‹ˆë‹¤.<br/>
                                <strong>ì •ì  ìŠ¤íŠ¸ë ˆì¹­:</strong> ê²½ê¸° í›„ì— ì‹¤ì‹œí•˜ë©°, ê·¼ìœ¡ì„ ì´ì™„ì‹œì¼œ íšŒë³µì„ ë•ìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                        
                        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h3 className="font-bold text-yellow-800 mb-2">ì£¼ë‹ˆì–´ ì„ ìˆ˜ íŠ¹ë³„ ì£¼ì˜ì‚¬í•­</h3>
                            <ul className="text-sm text-yellow-700 space-y-1">
                                <li>â€¢ ì„±ì¥íŒ ë³´í˜¸ë¥¼ ìœ„í•´ ê³¼ë„í•œ ìŠ¤íŠ¸ë ˆì¹­ ê¸ˆì§€</li>
                                <li>â€¢ í†µì¦ì´ ì•„ë‹Œ 'ë‹¹ê¸°ëŠ”' ëŠë‚Œì—ì„œ ë©ˆì¶”ê¸°</li>
                                <li>â€¢ ë°˜ë™ì„ ì´ìš©í•œ ìŠ¤íŠ¸ë ˆì¹­ ê¸ˆì§€</li>
                                <li>â€¢ ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ ë° íœ´ì‹</li>
                            </ul>
                        </div>
                        
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 className="font-bold text-blue-800 mb-2">ìŠ¤ì¿¼ì‹œ ë¶€ìƒ ì˜ˆë°©</h3>
                            <ul className="text-sm text-blue-700 space-y-1">
                                <li>â€¢ ê²½ê¸° ì „ ë°˜ë“œì‹œ ì¶©ë¶„í•œ ì›œì—…</li>
                                <li>â€¢ ì˜¬ë°”ë¥¸ ì‹ ë°œ ì°©ìš© (ë…¼ìŠ¬ë¦½)</li>
                                <li>â€¢ ì ì§„ì ì¸ í›ˆë ¨ ê°•ë„ ì¦ê°€</li>
                                <li>â€¢ ì •ê¸°ì ì¸ ê·¼ë ¥ ìš´ë™ ë³‘í–‰</li>
                            </ul>
                        </div>
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                    >
                        ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            );

            // Progress screen
            const ProgressScreen = () => (
                <div className="bg-white rounded-2xl shadow-xl p-6 space-y-6 w-full max-w-md">
                    <div className="text-center">
                        <Icons.TrendingUp />
                        <h2 className="text-2xl font-bold text-gray-800 mb-2 mt-4">ì§„í–‰ ìƒí™©</h2>
                        <p className="text-gray-600">ë‹¹ì‹ ì˜ ìŠ¤íŠ¸ë ˆì¹­ ê¸°ë¡ì„ í™•ì¸í•˜ì„¸ìš”</p>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-4">
                        <div className="bg-emerald-50 border border-emerald-200 rounded-lg p-4 text-center">
                            <div className="text-2xl font-bold text-emerald-600">{sessionProgress.length}</div>
                            <div className="text-sm text-emerald-700">ì™„ë£Œí•œ ì„¸ì…˜</div>
                        </div>
                        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
                            <div className="text-2xl font-bold text-blue-600">
                                {sessionProgress.filter(s => s.routine.includes('ì›œì—…')).length}
                            </div>
                            <div className="text-sm text-blue-700">ì›œì—… ì„¸ì…˜</div>
                        </div>
                    </div>
                    
                    <div className="space-y-3">
                        <h3 className="font-bold text-gray-800">ìµœê·¼ í™œë™</h3>
                        {sessionProgress.length === 0 ? (
                            <p className="text-gray-500 text-center py-8">ì•„ì§ ì™„ë£Œí•œ ì„¸ì…˜ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        ) : (
                            sessionProgress.slice(-5).map((session, index) => (
                                <div key={index} className="bg-white border border-gray-200 rounded-lg p-3">
                                    <div className="flex justify-between items-center">
                                        <span className="font-medium text-gray-800">{session.routine}</span>
                                        <span className="text-sm text-gray-500">
                                            {new Date(session.date).toLocaleDateString('ko-KR')}
                                        </span>
                                    </div>
                                </div>
                            ))
                        )}
                    </div>
                    
                    <button 
                        onClick={() => setCurrentScreen('main')}
                        className="w-full px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors"
                    >
                        ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            );

            // Timer logic
            useEffect(() => {
                let interval = null;
                if (isRunning && timeRemaining > 0) {
                    interval = setInterval(() => {
                        setTimeRemaining(time => {
                            if (time <= 1) {
                                setIsRunning(false);
                                return 0;
                            }
                            return time - 1;
                        });
                    }, 1000);
                } else if (timeRemaining === 0 && isRunning) {
                    setIsRunning(false);
                }
                return () => clearInterval(interval);
            }, [isRunning, timeRemaining]);

            // Exercise navigation
            const nextExercise = () => {
                const phase = currentRoutine?.phases[currentPhase];
                if (currentExercise < phase.exercises.length - 1) {
                    setCurrentExercise(currentExercise + 1);
                    setTimeRemaining(phase.exercises[currentExercise + 1].duration);
                } else if (currentPhase < currentRoutine.phases.length - 1) {
                    setCurrentPhase(currentPhase + 1);
                    setCurrentExercise(0);
                    setTimeRemaining(currentRoutine.phases[currentPhase + 1].exercises[0].duration);
                } else {
                    // Routine completed
                    const newSession = {
                        routine: currentRoutine.title,
                        date: new Date().toISOString(),
                        completed: true
                    };
                    setSessionProgress([...sessionProgress, newSession]);
                    setCurrentScreen('completed');
                }
                setIsRunning(false);
            };

            const previousExercise = () => {
                if (currentExercise > 0) {
                    setCurrentExercise(currentExercise - 1);
                    const phase = currentRoutine?.phases[currentPhase];
                    setTimeRemaining(phase.exercises[currentExercise - 1].duration);
                } else if (currentPhase > 0) {
                    setCurrentPhase(currentPhase - 1);
                    const prevPhase = currentRoutine?.phases[currentPhase - 1];
                    setCurrentExercise(prevPhase.exercises.length - 1);
                    setTimeRemaining(prevPhase.exercises[prevPhase.exercises.length - 1].duration);
                }
                setIsRunning(false);
            };

            const startRoutine = (routineType) => {
                const routine = routines[routineType];
                setCurrentRoutine(routine);
                setCurrentPhase(0);
                setCurrentExercise(0);
                setTimeRemaining(routine.phases[0].exercises[0].duration);
                setCurrentScreen('exercise');
                setIsRunning(false);
            };

            // Screen routing
            const renderScreen = () => {
                if (!userProfile) return <UserSetup />;
                
                switch (currentScreen) {
                    case 'main':
                        return <MainMenu />;
                    case 'exercise':
                        return <ExerciseScreen />;
                    case 'completed':
                        return <CompletionScreen />;
                    case 'education':
                        return <EducationScreen />;
                    case 'progress':
                        return <ProgressScreen />;
                    default:
                        return <MainMenu />;
                }
            };

            return renderScreen();
        };

        ReactDOM.render(<StretchingApp />, document.getElementById('root'));
    </script>

    <script>
        // PWA Installation Logic
        let deferredPrompt;
        const installButton = document.getElementById('installButton');
        const offlineIndicator = document.getElementById('offlineIndicator');

        // Check if app is already installed
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installButton.style.display = 'block';
        });

        installButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    installButton.style.display = 'none';
                }
                deferredPrompt = null;
            }
        });

        // Hide install button if already installed
        window.addEventListener('appinstalled', () => {
            installButton.style.display = 'none';
        });

        // Online/Offline status
        function updateOnlineStatus() {
            if (navigator.onLine) {
                offlineIndicator.style.display = 'none';
            } else {
                offlineIndicator.style.display = 'block';
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        updateOnlineStatus();

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            const swCode = `
                const CACHE_NAME = 'stretching-app-v1';
                const urlsToCache = [
                    '/',
                    'https://cdn.tailwindcss.com',
                    'https://unpkg.com/react@18/umd/react.development.js',
                    'https://unpkg.com/react-dom@18/umd/react-dom.development.js',
                    'https://unpkg.com/@babel/standalone/babel.min.js'
                ];

                self.addEventListener('install', event => {
                    event.waitUntil(
                        caches.open(CACHE_NAME)
                            .then(cache => cache.addAll(urlsToCache))
                    );
                });

                self.addEventListener('fetch', event => {
                    event.respondWith(
                        caches.match(event.request)
                            .then(response => {
                                if (response) {
                                    return response;
                                }
                                return fetch(event.request);
                            })
                    );
                });
            `;

            const blob = new Blob([swCode], { type: 'application/javascript' });
            const swUrl = URL.createObjectURL(blob);

            navigator.serviceWorker.register(swUrl)
                .then(registration => {
                    console.log('Service Worker registered successfully');
                })
                .catch(error => {
                    console.log('Service Worker registration failed');
                });
        }

        // Prevent zoom on double tap (iOS Safari)
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Prevent pull-to-refresh
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length !== 1) { return; }
            const firstTouch = e.touches[0];
            initialY = firstTouch.clientY;
        });

        document.addEventListener('touchmove', function(e) {
            if (e.touches.length !== 1) { return; }
            const currentY = e.touches[0].clientY;
            const diff = initialY - currentY;
            if (diff > 0) { return; }
            if (window.pageYOffset === 0) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
