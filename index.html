<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="description" content="Ï£ºÎãàÏñ¥ Ïä§ÏøºÏãú ÏÑ†ÏàòÎ•º ÏúÑÌïú Í≥ºÌïôÏ†ÅÏù¥Í≥† ÏïàÏ†ÑÌïú Ïä§Ìä∏Î†àÏπ≠ Ï†ÑÎ¨∏ Ïï±">
    <meta name="theme-color" content="#10b981">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠">
    
    <title>Ï£ºÎãàÏñ¥ Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠ ÌîÑÎ°ú</title>
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIj4KICA8cmVjdCB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgZmlsbD0iIzEwYjk4MSIgcng9IjEwIiB5PSIxMCIgd2lkdGg9IjE3MiIgaGVpZ2h0PSIxNzIiLz4KICA8dGV4dCB4PSI5NiIgeT0iMTEwIiBmb250LXNpemU9IjcwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiPuyCpO2KuOyWtuyngDwvdGV4dD4KPC9zdmc+">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIj4KICA8cmVjdCB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgZmlsbD0iIzEwYjk4MSIgcng9IjEwIiB5PSIxMCIgd2lkdGg9IjE3MiIgaGVpZ2h0PSIxNzIiLz4KICA8dGV4dCB4PSI5NiIgeT0iMTEwIiBmb250LXNpemU9IjcwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiPuyCpO2KuOyWtuyngDwvdGV4dD4KPC9zdmc+">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuyjvOuLiOyWtCDsiqTsv7Dsovwg7Iqk7Yq47Ja27LmtIO2UhOuhnSIsCiAgInNob3J0X25hbWUiOiAi7Iqk7Yq47Ja2IOyVsSIsCiAgImRlc2NyaXB0aW9uIjogIuyjvOuLiOyWtCDsiqTsv7Dsovwg7ISg7IiY66W47J2EIOychO2VnCDqs7XtlZnsoIHsnbTqs6Ag7JWI7KCE7ZWY6rOgIOyViOyghO2VnCDsiqTtirjslrbs5Kcg7KCV66y4IiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjMTBiOTgxIiwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiLAogICJjYXRlZ29yaWVzIjogWyJmaXRuZXNzIiwgInNwb3J0cyIsICJoZWFsdGgiXSwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4T1RJaUlHaGxhV2RvZEQwaU1Ua3lJajRLSUNBOGNtVmpkQ0IzYVdSMGFEMGlNVGt5SWlCb1pXbG5hSFE5SWpFNU1pSWdabWxzYkQwaUl6RXdZams0MVNJZ2NuZzlJakV3SWlCNVBTSXhNQ0lnZDJsa2RHZzlJakUzTWlJZ2FHVnBaMmgwUFNJeE56SWlMejRLSUNBOGRHVjRkQ0I0UFNJNU5pSWdlVDBpTVRFd0lpQm1iMjUwTFhOcGVtVTlJamN3SWlCbWFXeHNQU0ozYUdsMFpTSWdkR1Y0ZEMxaGJtTm9iM0k5SW0xcFpHUnNaU0lnWm05dWRDMW1ZVzFwYkhrcUluTmhibk10YzJWeWFXWWlQdWlDcE8yS3VPeVd0dXluZ0R3dmRHVjRkRDRLUEM5emRtYysrQT09IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBIM1ZuSUhodGJHeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0kxTVRJaUlHaGxhV2RvZEQwaU5URXlJajRLSUNBOGNtVmpkQ0IzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdabWxzYkQwaUl6RXdZams0NVNJZ2NuZzlJakl3SWlCNVBTSXlNQ0lnZDJsa2RHZzlJalEzTWlJZ2FHVnBaMmgwUFNJME56SWlMejRLSUNBOGRHVjRkQ0I0UFNJeU5UWWlJSGs5SWpJM01pSWdabTl1ZEMxemFYcGxQU0l4TkRBaUlHWnBiR3c5SW5kb2FYUmxJaUIwWlhoMExXRnVZMmh2Y2owaWJXbGtaR3hsU1NJZ1ptOXVkQzFtWVcxcGJIa3FJWE5oYm5NdGMyVnlhV1lpUHVpQ3BPMkt1T3lXdHV5bmdEd3ZkR1Y0ZEQ0S1BDOXpkbWMrIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"></noscript>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #ecfdf5 100%);
            color: #1f2937;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* ÌÑ∞Ïπò Í∞ÄÎä•Ìïú ÏöîÏÜåÎì§ÏùÄ ÌÑ∞Ïπò ÌóàÏö© */
        button, select, input, [data-action], .clickable, .dropdown-item {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }
        
        .app {
            min-height: 100vh;
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-top: max(16px, env(safe-area-inset-top));
            padding-bottom: max(16px, env(safe-area-inset-bottom));
            padding-left: max(16px, env(safe-area-inset-left));
            padding-right: max(16px, env(safe-area-inset-right));
        }
        
        .container {
            width: 100%;
            max-width: 420px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            overflow: hidden;
            position: relative;
        }
        
        .header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            padding: 24px;
            text-align: center;
            color: white;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .content {
            padding: 24px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            text-align: center;
            position: relative;
            overflow: hidden;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            outline: none;
            min-height: 48px;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 14px 0 rgba(16, 185, 129, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 4px 14px 0 rgba(59, 130, 246, 0.3);
        }
        
        .btn-outline {
            background: white;
            color: #374151;
            border: 2px solid #e5e7eb;
        }
        
        .btn-outline:hover, .btn-outline:active {
            border-color: #10b981;
            color: #10b981;
            background: #f0fdf4;
        }
        
        .btn:disabled {
            background: #f3f4f6 !important;
            color: #9ca3af !important;
            cursor: not-allowed !important;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .grid {
            display: grid;
            gap: 16px;
        }
        
        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .timer {
            text-align: center;
            margin: 32px 0;
        }
        
        .timer-display {
            font-size: 64px;
            font-weight: 700;
            color: #1f2937;
            line-height: 1;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .timer.running .timer-display {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .exercise-card {
            background: #f8fafc;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            border: 2px solid #e2e8f0;
        }
        
        .exercise-title {
            font-size: 20px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 12px;
        }
        
        .exercise-info {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 16px;
        }
        
        .exercise-instructions {
            font-size: 14px;
            line-height: 1.6;
            color: #374151;
            margin-bottom: 16px;
        }
        
        .safety-tip {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 12px;
            padding: 12px;
            font-size: 13px;
            color: #92400e;
        }
        
        .safety-tip::before {
            content: "‚ö†Ô∏è ";
            font-weight: 700;
        }
        
        .progress-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 16px 0;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        
        .controls {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .btn-control {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            min-height: 48px;
            outline: none;
        }
        
        .btn-play {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            flex: 2;
        }
        
        .btn-skip {
            background: #f3f4f6;
            color: #6b7280;
        }
        
        .btn-skip:hover, .btn-skip:active {
            background: #e5e7eb;
        }
        
        .profile-setup {
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        /* Ïª§Ïä§ÌÖÄ ÎìúÎ°≠Îã§Ïö¥ Ïä§ÌÉÄÏùº */
        .custom-dropdown {
            position: relative;
            width: 100%;
        }
        
        .dropdown-selected {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            background: white;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-height: 48px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }
        
        .dropdown-selected:focus,
        .dropdown-selected.active {
            border-color: #10b981;
            outline: none;
        }
        
        .dropdown-arrow {
            transition: transform 0.2s ease;
        }
        
        .dropdown-selected.active .dropdown-arrow {
            transform: rotate(180deg);
        }
        
        .dropdown-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #10b981;
            border-radius: 10px;
            margin-top: 4px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            display: none;
        }
        
        .dropdown-options.show {
            display: block;
        }
        
        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f3f4f6;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        }
        
        .dropdown-item:last-child {
            border-bottom: none;
        }
        
        .dropdown-item:hover,
        .dropdown-item:active {
            background: #f0fdf4;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            min-height: 48px;
            outline: none;
        }
        
        .checkbox-item:hover, .checkbox-item:active {
            border-color: #d1d5db;
        }
        
        .checkbox-item.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        .checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            transition: all 0.2s ease;
            flex-shrink: 0;
        }
        
        .checkbox.checked {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }
        
        .completion-screen {
            text-align: center;
            padding: 40px 24px;
        }
        
        .completion-icon {
            font-size: 64px;
            margin-bottom: 24px;
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 24px 0;
        }
        
        .stat-card {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .education-content {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 8px;
        }
        
        .education-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
        }
        
        .education-card h3 {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 8px;
        }
        
        .education-card p, .education-card ul {
            font-size: 14px;
            color: #4b5563;
            line-height: 1.5;
        }
        
        .education-card ul {
            list-style: none;
            padding-left: 0;
        }
        
        .education-card li {
            padding: 4px 0;
        }
        
        .education-card li::before {
            content: "‚Ä¢ ";
            color: #10b981;
            font-weight: bold;
        }
        
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px;
            border-radius: 12px;
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .install-prompt button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
            min-height: 36px;
        }
        
        .offline-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #f59e0b;
            color: white;
            padding: 8px;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            display: none;
        }
        
        .install-help {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
            font-size: 14px;
        }
        
        .install-help h4 {
            color: #1e40af;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .install-help p {
            color: #1e40af;
            margin-bottom: 8px;
        }
        
        .install-help ul {
            color: #1e40af;
            padding-left: 20px;
        }
        
        .hidden {
            display: none !important;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ÌÑ∞Ïπò ÌîºÎìúÎ∞± Í∞úÏÑ† */
        .btn:active, .btn-control:active, .checkbox-item:active, .dropdown-selected:active, .dropdown-item:active {
            transform: scale(0.96);
        }
        
        /* Mobile optimizations */
        @media (max-width: 480px) {
            .app {
                padding: 8px;
            }
            
            .timer-display {
                font-size: 48px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .content {
                padding: 16px;
            }
            
            .btn {
                font-size: 15px;
                padding: 14px;
            }
            
            .btn-control {
                padding: 10px;
                font-size: 14px;
            }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            }
            
            .container {
                background: #374151;
                color: white;
            }
            
            .exercise-card {
                background: #4b5563;
                border-color: #6b7280;
            }
            
            .dropdown-selected, .dropdown-options {
                background: #4b5563;
                border-color: #6b7280;
                color: white;
            }
            
            .dropdown-item:hover {
                background: #374151;
            }
            
            .checkbox-item {
                background: #4b5563;
                border-color: #6b7280;
            }
        }
    </style>
</head>
<body>
    <div id="offlineBanner" class="offline-banner">
        üîÑ Ïò§ÌîÑÎùºÏù∏ Î™®Îìú - Ïù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî
    </div>
    
    <div class="app">
        <div class="container">
            <div id="app-content">
                <!-- Content will be rendered here -->
            </div>
        </div>
    </div>
    
    <div id="installPrompt" class="install-prompt">
        <div>
            <strong>üì± Ïä§ÎßàÌä∏Ìè∞Ïóê ÏÑ§ÏπòÌïòÍ∏∞</strong>
            <p style="font-size: 12px; margin: 4px 0 0 0;">Ïò§ÌîÑÎùºÏù∏ÏóêÏÑúÎèÑ ÏÇ¨Ïö© Í∞ÄÎä•</p>
        </div>
        <button onclick="installApp()">ÏÑ§Ïπò</button>
        <button onclick="dismissInstall()" style="background: transparent;">ÎÇòÏ§ëÏóê</button>
    </div>

    <script>
        // App State Management
        class StretchingApp {
            constructor() {
                this.state = {
                    currentScreen: 'welcome',
                    userProfile: this.loadProfile(),
                    currentRoutine: null,
                    currentPhase: 0,
                    currentExercise: 0,
                    timeRemaining: 0,
                    isRunning: false,
                    sessionProgress: this.loadProgress(),
                    timerInterval: null
                };
                
                this.routines = {
                    warmup: {
                        id: 'warmup',
                        title: 'Í≤ΩÍ∏∞ Ï†Ñ ÏõúÏóÖ (ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠)',
                        description: 'Ïä§ÏøºÏãú Í≤ΩÍ∏∞Î•º ÏúÑÌïú 3Îã®Í≥Ñ Í≥ºÌïôÏ†Å Ï§ÄÎπÑÏö¥Îèô',
                        color: '#10b981',
                        totalTime: 18, // minutes
                        phases: [
                            {
                                name: '1Îã®Í≥Ñ: ÏùºÎ∞òÏ†Å ÌôúÏÑ±Ìôî',
                                description: 'Ïã¨Î∞ïÏàò ÏÉÅÏäπ Î∞è Ï≤¥Ïò® Ï°∞Ï†à',
                                exercises: [
                                    {
                                        name: 'Í∞ÄÎ≤ºÏö¥ Ï°∞ÍπÖ & Ï†êÌïëÏû≠',
                                        duration: 180,
                                        instructions: 'ÏΩîÌä∏ Ï£ºÎ≥ÄÏùÑ Í∞ÄÎ≥çÍ≤å Ï°∞ÍπÖÌïòÍ±∞ÎÇò Ï†úÏûêÎ¶¨ÏóêÏÑú Ï†êÌïëÏû≠ÏùÑ Ïã§ÏãúÌïòÏó¨ Î™∏ÏùÑ ÏòàÏó¥ÌïòÏÑ∏Ïöî. Ïà®Ïù¥ ÏïΩÍ∞Ñ Ï∞∞ Ï†ïÎèÑÏùò Í∞ïÎèÑÎ°ú ÏßÑÌñâÌï©ÎãàÎã§.',
                                        targetMuscles: 'Ï†ÑÏã†, Ïã¨ÌèêÏßÄÍµ¨Î†•',
                                        safetyTip: 'Í∞ëÏûëÏä§Îü¨Ïö¥ ÏõÄÏßÅÏûÑÏùÄ ÌîºÌïòÍ≥† Ï†êÏßÑÏ†ÅÏúºÎ°ú Í∞ïÎèÑÎ•º ÎÜíÏù¥ÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Ìåî ÎèåÎ¶¨Í∏∞ & Ïñ¥Íπ® ÌíÄÍ∏∞',
                                        duration: 60,
                                        instructions: 'ÏïûÏúºÎ°ú, Îí§Î°ú ÌÅ¨Í≤å ÏõêÏùÑ Í∑∏Î¶¨Î©∞ Ïñ¥Íπ®Î•º ÌíÄÏñ¥Ï§çÎãàÎã§. ÏûëÏùÄ ÏõêÏóêÏÑú ÏãúÏûëÌïòÏó¨ Ï†êÏ∞® ÌÅ¨Í≤å ÎßåÎìúÏÑ∏Ïöî.',
                                        targetMuscles: 'Ïñ¥Íπ®, ÏÉÅÏ≤¥',
                                        safetyTip: 'Ïñ¥Íπ®Ïóê ÌÜµÏ¶ùÏù¥ ÏûàÎã§Î©¥ ÏûëÏùÄ Î≤îÏúÑÏóêÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî.'
                                    }
                                ]
                            },
                            {
                                name: '2Îã®Í≥Ñ: Ï†ÑÏã† Í∞ÄÎèôÏÑ± ÌôïÎ≥¥',
                                description: 'Í¥ÄÏ†à Í∞ÄÎèôÎ≤îÏúÑ Ï¶ùÎåÄ Î∞è Í∑ºÏú° ÌôúÏÑ±Ìôî',
                                exercises: [
                                    {
                                        name: 'Î™∏ÌÜµ ÌíçÏ∞® ÎèåÎ¶¨Í∏∞',
                                        duration: 60,
                                        instructions: 'Ïñë Îã§Î¶¨Î•º Ïñ¥Íπ®ÎÑàÎπÑÎ°ú Î≤åÎ¶¨Í≥† ÏÑ† ÌõÑ, ÌóàÎ¶¨Î•º ÏàôÏó¨ ÏôºÌåîÏùÑ Ïò§Î•∏Î∞ú Ï™ΩÏúºÎ°ú, Ïò§Î•∏ÌåîÏùÄ ÌïòÎäòÎ°ú ÎªóÏñ¥ ÍµêÏ∞® ÎèôÏûëÏùÑ 20-30Ìöå Î∞òÎ≥µÌï©ÎãàÎã§.',
                                        targetMuscles: 'Î™∏ÌÜµ, Îì±, ÌóàÎ¶¨',
                                        safetyTip: 'Í≥ºÎèÑÌïú Î∞òÎèôÏùÄ Í∏àÏßÄ. Î∂ÄÎìúÎüΩÍ≥† ÌÜµÏ†úÎêú ÏõÄÏßÅÏûÑÏúºÎ°ú ÏßÑÌñâÌïòÏÑ∏Ïöî.',
                                        reps: '20-30Ìöå'
                                    },
                                    {
                                        name: 'Îã§Î¶¨ ÏïûÎí§ & Ï¢åÏö∞ ÌùîÎì§Í∏∞',
                                        duration: 120,
                                        instructions: 'Î≤ΩÏù¥ÎÇò ÌååÌä∏ÎÑàÎ•º Ïû°Í≥† Í∑†ÌòïÏùÑ Ïú†ÏßÄÌïòÎ©∞ ÌïúÏ™Ω Îã§Î¶¨Î•º ÏïûÎí§Î°ú, Í∑∏Îã§Ïùå Ï¢åÏö∞Î°ú Î∂ÄÎìúÎüΩÍ≤å ÌùîÎì≠ÎãàÎã§.',
                                        targetMuscles: 'ÌñÑÏä§Ìä∏ÎßÅ, ÏóâÎç©Ïù¥ Íµ¥Í≥°Í∑º',
                                        safetyTip: 'Í∑†ÌòïÏùÑ ÏûÉÏßÄ ÏïäÎèÑÎ°ù ÏßÄÏßÄÎåÄÎ•º ÌôúÏö©ÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'ÌïòÏù¥ Îãà & Î≤ÑÌä∏ ÌÇ•',
                                        duration: 60,
                                        instructions: 'Ï†úÏûêÎ¶¨ÏóêÏÑú Í∞ÄÎ≥çÍ≤å Îõ∞Î©¥ÏÑú Î¨¥Î¶éÏùÑ Í∞ÄÏä¥ ÎÜíÏù¥ÍπåÏßÄ Ïò¨Î¶¨Îäî ÌïòÏù¥ ÎãàÏôÄ Î∞úÎí§ÍøàÏπòÎ•º ÏóâÎç©Ïù¥Î°ú Ï∞®Îäî Î≤ÑÌä∏ ÌÇ•ÏùÑ Î≤àÍ∞àÏïÑ ÏßÑÌñâÌï©ÎãàÎã§.',
                                        targetMuscles: 'ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º, ÌñÑÏä§Ìä∏ÎßÅ, ÎëîÍ∑º',
                                        safetyTip: 'Ï∞©ÏßÄ Ïãú Î¨¥Î¶éÏóê Î¨¥Î¶¨Í∞Ä Í∞ÄÏßÄ ÏïäÎèÑÎ°ù Î∂ÄÎìúÎüΩÍ≤å Ï∞©ÏßÄÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Í≥†Í¥ÄÏ†à ÌöåÏ†Ñ Ïö¥Îèô',
                                        duration: 90,
                                        instructions: 'Î¨¥Î¶éÏùÑ 90ÎèÑÎ°ú Îì§Ïñ¥Ïò¨Î†§ Î∞îÍπ• Î∞©Ìñ•ÏúºÎ°ú ÏõêÏùÑ Í∑∏Î¶¨ÎìØ ÌöåÏ†ÑÏãúÌÇµÎãàÎã§. ÏóâÎç©Ïù¥ Í¥ÄÏ†àÏùò Í∞ÄÎèôÏÑ±ÏùÑ ÎÜíÏûÖÎãàÎã§.',
                                        targetMuscles: 'Í≥†Í¥ÄÏ†à, ÏóâÎç©Ïù¥',
                                        safetyTip: 'ÌÜµÏ¶ùÏù¥ ÎäêÍª¥ÏßÄÎ©¥ ÌöåÏ†Ñ Î≤îÏúÑÎ•º Ï§ÑÏù¥ÏÑ∏Ïöî.'
                                    }
                                ]
                            },
                            {
                                name: '3Îã®Í≥Ñ: Ïä§ÏøºÏãú ÌäπÏ†ï ÎèôÏûë ÌôúÏÑ±Ìôî',
                                description: 'Ïã§Ï†ú Í≤ΩÍ∏∞ ÎèôÏûë Î™®Î∞© Î∞è Í∑ºÏã†Í≤Ω ÌôúÏÑ±Ìôî',
                                exercises: [
                                    {
                                        name: 'Í±∑Îäî Îü∞ÏßÄ & ÌöåÏ†Ñ ÎèôÏûë',
                                        duration: 120,
                                        instructions: 'ÏïûÏúºÎ°ú Ìïú Î∞úÏùÑ ÌÅ¨Í≤å ÎÇ¥ÎîõÏñ¥ Îü∞ÏßÄ ÏûêÏÑ∏Î•º Ï∑®ÌïòÍ≥†, ÏïûÏ™Ω Îã§Î¶¨ ÏúÑÎ°ú ÏÉÅÏ≤¥Î•º ÎπÑÌãâÎãàÎã§. Í∞Å Îã§Î¶¨Îãπ 10ÌöåÏî© Î∞òÎ≥µÌï©ÎãàÎã§.',
                                        targetMuscles: 'ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º, ÎëîÍ∑º, ÏóâÎç©Ïù¥ Íµ¥Í≥°Í∑º, ÏΩîÏñ¥',
                                        safetyTip: 'Î¨¥Î¶éÏù¥ Î∞úÎÅùÏùÑ ÎÑòÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùòÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Í≥†Ïä§ÌåÖ (Ghosting) ÌõàÎ†®',
                                        duration: 300,
                                        instructions: 'ÎùºÏºìÏùÑ Îì§Í≥† ÏΩîÌä∏Ïùò ÎÑ§ Í∑ÄÌâÅÏù¥ÏôÄ Ï§ëÏïô T-Ï°¥ÏúºÎ°ú Îπ†Î•¥Í≤å Ïù¥ÎèôÌïòÎ©∞ Îü∞ÏßÄ ÏûêÏÑ∏Î°ú Í∞ÄÏÉÅÏùò Í≥µÏùÑ ÏπòÎäî ÎèôÏûëÏùÑ Ïó∞ÏäµÌï©ÎãàÎã§.',
                                        targetMuscles: 'Ï†ÑÏã† (Í≤ΩÍ∏∞ ÌäπÌôî)',
                                        safetyTip: 'Ï∂©Î∂ÑÌïú Í≥µÍ∞ÑÏùÑ ÌôïÎ≥¥ÌïòÍ≥† ÎØ∏ÎÅÑÎü¨ÏßÄÏßÄ ÏïäÎäî Ïã†Î∞úÏùÑ Ï∞©Ïö©ÌïòÏÑ∏Ïöî.'
                                    }
                                ]
                            }
                        ]
                    },
                    cooldown: {
                        id: 'cooldown',
                        title: 'Í≤ΩÍ∏∞ ÌõÑ Ïø®Îã§Ïö¥ (Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠)',
                        description: 'Í∑ºÏú° Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ Ï¥âÏßÑÏùÑ ÏúÑÌïú Ï≤¥Í≥ÑÏ†Å Ï†ïÎ¶¨Ïö¥Îèô',
                        color: '#3b82f6',
                        totalTime: 15, // minutes
                        phases: [
                            {
                                name: '1Îã®Í≥Ñ: Ï†êÏßÑÏ†Å Ïã¨Î∞ïÏàò Í∞êÏÜå',
                                description: 'Í≤ΩÍ∏∞ ÌõÑ ÏïàÏ†ÑÌïú Ïã¨Î∞ïÏàò Ï†ïÏÉÅÌôî',
                                exercises: [
                                    {
                                        name: 'Ï≤úÏ≤úÌûà Í±∑Í∏∞',
                                        duration: 180,
                                        instructions: 'ÏΩîÌä∏Î•º Ï≤úÏ≤úÌûà Í±∏ÏúºÎ©∞ Ìò∏Ìù°ÏùÑ Ï†ïÏÉÅÌôîÌïòÍ≥† Ïã¨Î∞ïÏàòÎ•º Ï†êÏßÑÏ†ÅÏúºÎ°ú ÎÇÆÏ∂•ÎãàÎã§. Í∞ëÏûëÏä§ÎüΩÍ≤å Î©àÏ∂îÏßÄ ÎßàÏÑ∏Ïöî.',
                                        targetMuscles: 'Ïã¨ÌèêÍ∏∞Îä• Ï†ïÏÉÅÌôî',
                                        safetyTip: 'Ïñ¥ÏßÄÎü¨ÏõÄÏù¥ ÎäêÍª¥ÏßÄÎ©¥ Ï¶âÏãú ÏïâÏïÑÏÑú Ìú¥ÏãùÌïòÏÑ∏Ïöî.'
                                    }
                                ]
                            },
                            {
                                name: '2Îã®Í≥Ñ: Ï£ºÏöî Í∑ºÏú°Íµ∞ Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠',
                                description: 'Í≤ΩÍ∏∞Î°ú Í∏¥Ïû•Îêú Í∑ºÏú°Ïùò Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ',
                                exercises: [
                                    {
                                        name: 'ÌñÑÏä§Ìä∏ÎßÅ Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'Î∞îÎã•Ïóê ÏïâÏïÑ Îã§Î¶¨Î•º Í≥ßÍ≤å ÎªóÍ≥† ÏÉÅÏ≤¥Î•º ÏïûÏúºÎ°ú ÏàôÏù¥Í±∞ÎÇò, ÎàÑÏö¥ ÏûêÏÑ∏ÏóêÏÑú ÌïúÏ™Ω Îã§Î¶¨Î•º Í∞ÄÏä¥ÏúºÎ°ú ÎãπÍ≤® ÌóàÎ≤ÖÏßÄ Îí§Ï™ΩÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                        targetMuscles: 'ÌóàÎ≤ÖÏßÄ Îí§Ï™Ω',
                                        safetyTip: 'Î∞òÎèôÏùÑ Ï£ºÏßÄ ÎßêÍ≥† Î∂ÄÎìúÎüΩÍ≤å ÎäòÎ†§Ï£ºÏÑ∏Ïöî. ÌÜµÏ¶ùÏù¥ ÏïÑÎãå ÎãπÍ∏∞Îäî ÎäêÎÇåÏóê ÏßëÏ§ëÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'ÏÑ† ÏûêÏÑ∏ÏóêÏÑú Î≤ΩÏùÑ ÏßöÍ≥† ÌïúÏ™Ω Îã§Î¶¨Î•º Îí§Î°ú Íµ¨Î∂ÄÎ†§ ÏÜêÏúºÎ°ú Ïû°Í≥†, Î∞úÎí§ÍøàÏπòÎ•º ÏóâÎç©Ïù¥ Ï™ΩÏúºÎ°ú Î∂ÄÎìúÎüΩÍ≤å ÎãπÍπÅÎãàÎã§.',
                                        targetMuscles: 'ÌóàÎ≤ÖÏßÄ ÏïûÏ™Ω',
                                        safetyTip: 'Î¨¥Î¶éÏù¥ Î∞îÍπ•Ï™ΩÏúºÎ°ú Î≤åÏñ¥ÏßÄÏßÄ ÏïäÎèÑÎ°ù Ï£ºÏùòÌïòÍ≥†, ÌóàÎ¶¨Í∞Ä Í≥ºÎèÑÌïòÍ≤å Í∫æÏù¥ÏßÄ ÏïäÍ≤å ÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Ïû•ÏöîÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'Îü∞ÏßÄ ÏûêÏÑ∏ÏóêÏÑú Îí§Ï™Ω Î¨¥Î¶éÏùÑ Î∞îÎã•Ïóê ÎåÄÍ≥†, Í≥®Î∞òÏùÑ ÏïûÏúºÎ°ú Î∂ÄÎìúÎüΩÍ≤å Î∞ÄÏñ¥ ÌóàÎ≤ÖÏßÄ ÏïûÏ™ΩÍ≥º Í≥®Î∞ò ÏïûÏ™ΩÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                        targetMuscles: 'ÏóâÎç©Ïù¥ Íµ¥Í≥°Í∑º, Í≥®Î∞ò',
                                        safetyTip: 'ÌóàÎ¶¨Í∞Ä Í≥ºÎèÑÌïòÍ≤å Í∫æÏù¥ÏßÄ ÏïäÎèÑÎ°ù Î≥µÎ∂ÄÏóê ÏÇ¥Ïßù ÌûòÏùÑ Ï£ºÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Ï¢ÖÏïÑÎ¶¨ Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'Î≤ΩÏùÑ ÏßöÍ≥† Ìïú Î∞úÏùÑ Îí§Î°ú ÎªóÏñ¥ Î∞úÎí§ÍøàÏπòÎ•º Î∞îÎã•Ïóê ÏßÄÍ∑∏Ïãú ÎàÑÎ•¥Î©∞ Ï¢ÖÏïÑÎ¶¨ Í∑ºÏú°ÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                        targetMuscles: 'Ï¢ÖÏïÑÎ¶¨',
                                        safetyTip: 'Î∞úÎí§ÍøàÏπòÍ∞Ä Î∞îÎã•ÏóêÏÑú Îñ®Ïñ¥ÏßÄÏßÄ ÏïäÎèÑÎ°ù Ïú†ÏßÄÌïòÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'ÎëîÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'Î∞îÎã•Ïóê ÏïâÏïÑ ÌïúÏ™Ω Îã§Î¶¨Î•º Î∞òÎåÄÏ™Ω Î¨¥Î¶é ÏúÑÏóê Ïò¨Î¶¨Í≥†, ÏÉÅÏ≤¥Î•º ÏïûÏúºÎ°ú ÏàôÏó¨ ÏóâÎç©Ïù¥ Í∑ºÏú°ÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                        targetMuscles: 'ÏóâÎç©Ïù¥',
                                        safetyTip: 'ÌóàÎ¶¨Î•º Íµ¨Î∂ÄÎ¶¨ÏßÄ ÎßêÍ≥† Í≥®Î∞òÏóêÏÑú ÏïûÏúºÎ°ú ÏàôÏù¥ÏÑ∏Ïöî.'
                                    },
                                    {
                                        name: 'Ïñ¥Íπ® & ÏÇºÎëêÍ∑º Ïä§Ìä∏Î†àÏπ≠',
                                        duration: 30,
                                        instructions: 'ÌïúÏ™Ω ÌåîÏùÑ Í∞ÄÏä¥ ÏïûÏúºÎ°ú ÍµêÏ∞®ÏãúÏºú Îã§Î•∏ ÌåîÎ°ú ÏßÄÌÉ±ÌïòÍ±∞ÎÇò, ÌåîÍøàÏπòÎ•º Íµ¨Î∂ÄÎ†§ Î®∏Î¶¨ Îí§Î°ú ÎÑòÍ≤® ÏÇºÎëêÍ∑ºÏùÑ ÎäòÎ¶ΩÎãàÎã§.',
                                        targetMuscles: 'Ïñ¥Íπ®, ÏÇºÎëêÍ∑º',
                                        safetyTip: 'Î™©Ïóê Î¨¥Î¶¨Í∞Ä Í∞ÄÏßÄ ÏïäÎèÑÎ°ù Î∂ÄÎìúÎüΩÍ≤å ÏßÑÌñâÌïòÏÑ∏Ïöî.'
                                    }
                                ]
                            }
                        ]
                    }
                };
                
                this.init();
            }
            
            init() {
                if (this.state.userProfile.age) {
                    this.state.currentScreen = 'main';
                }
                this.render();
                this.setupEventListeners();
            }
            
            loadProfile() {
                try {
                    return JSON.parse(localStorage.getItem('userProfile')) || { age: '', experience: '', injuries: [] };
                } catch (e) {
                    return { age: '', experience: '', injuries: [] };
                }
            }
            
            saveProfile() {
                localStorage.setItem('userProfile', JSON.stringify(this.state.userProfile));
            }
            
            loadProgress() {
                try {
                    return JSON.parse(localStorage.getItem('sessionProgress')) || [];
                } catch (e) {
                    return [];
                }
            }
            
            saveProgress() {
                localStorage.setItem('sessionProgress', JSON.stringify(this.state.sessionProgress));
            }
            
            setupEventListeners() {
                // ÌÑ∞ÏπòÏôÄ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Î™®Îëê Ï≤òÎ¶¨
                const handleInteraction = (e) => {
                    let target = e.target;
                    
                    // Î∂ÄÎ™® ÏöîÏÜå Ï§ëÏóêÏÑú data-actionÏùÑ Ï∞æÍ∏∞
                    while (target && !target.matches('[data-action]') && target !== document.body) {
                        target = target.parentElement;
                    }
                    
                    if (target && target.matches('[data-action]')) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const action = target.dataset.action;
                        const value = target.dataset.value;
                        this.handleAction(action, value, target);
                    }
                };
                
                // ÌÅ¥Î¶≠Í≥º ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ Î™®Îëê Î∞îÏù∏Îî©
                document.addEventListener('click', handleInteraction, { passive: false });
                document.addEventListener('touchend', handleInteraction, { passive: false });
                
                // ÎìúÎ°≠Îã§Ïö¥ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.custom-dropdown')) {
                        this.closeAllDropdowns();
                    }
                });
                
                // ÎçîÎ∏îÌÉ≠ ÌôïÎåÄ Î∞©ÏßÄ
                let lastTouchEnd = 0;
                document.addEventListener('touchend', (e) => {
                    const now = Date.now();
                    if (now - lastTouchEnd <= 300) {
                        e.preventDefault();
                    }
                    lastTouchEnd = now;
                }, false);
            }
            
            handleAction(action, value, element) {
                console.log('Action triggered:', action, value);
                
                switch (action) {
                    case 'start-routine':
                        this.startRoutine(value);
                        break;
                    case 'next-exercise':
                        this.nextExercise();
                        break;
                    case 'prev-exercise':
                        this.prevExercise();
                        break;
                    case 'toggle-timer':
                        this.toggleTimer();
                        break;
                    case 'complete-profile':
                        this.completeProfile();
                        break;
                    case 'toggle-injury':
                        this.toggleInjury(value);
                        break;
                    case 'navigate':
                        this.navigate(value);
                        break;
                    case 'reset-profile':
                        this.resetProfile();
                        break;
                    case 'toggle-dropdown':
                        this.toggleDropdown(value);
                        break;
                    case 'select-option':
                        this.selectDropdownOption(element);
                        break;
                }
            }
            
            toggleDropdown(dropdownId) {
                this.closeAllDropdowns();
                
                const dropdown = document.getElementById(dropdownId);
                const selected = dropdown.querySelector('.dropdown-selected');
                const options = dropdown.querySelector('.dropdown-options');
                
                selected.classList.toggle('active');
                options.classList.toggle('show');
            }
            
            closeAllDropdowns() {
                const dropdowns = document.querySelectorAll('.custom-dropdown');
                dropdowns.forEach(dropdown => {
                    const selected = dropdown.querySelector('.dropdown-selected');
                    const options = dropdown.querySelector('.dropdown-options');
                    
                    if (selected) selected.classList.remove('active');
                    if (options) options.classList.remove('show');
                });
            }
            
            selectDropdownOption(element) {
                const value = element.dataset.value;
                const field = element.dataset.field;
                const dropdown = element.closest('.custom-dropdown');
                const selected = dropdown.querySelector('.dropdown-selected span');
                
                // ÏÑ†ÌÉùÎêú Í∞í ÌëúÏãú
                selected.textContent = element.textContent;
                
                // ÌîÑÎ°úÌïÑ ÏóÖÎç∞Ïù¥Ìä∏
                this.state.userProfile[field] = value;
                
                // ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
                this.closeAllDropdowns();
                
                // ÌôîÎ©¥ Ïû¨Î†åÎçîÎßÅ
                this.render();
            }
            
            toggleInjury(injury) {
                const injuries = this.state.userProfile.injuries;
                
                if (injury === 'ÏóÜÏùå') {
                    if (injuries.includes('ÏóÜÏùå')) {
                        this.state.userProfile.injuries = [];
                    } else {
                        this.state.userProfile.injuries = ['ÏóÜÏùå'];
                    }
                } else {
                    if (injuries.includes(injury)) {
                        this.state.userProfile.injuries = injuries.filter(i => i !== injury);
                    } else {
                        this.state.userProfile.injuries = injuries.filter(i => i !== 'ÏóÜÏùå').concat(injury);
                    }
                }
                
                this.render();
            }
            
            completeProfile() {
                const { age, experience, injuries } = this.state.userProfile;
                if (age && experience && injuries.length > 0) {
                    this.saveProfile();
                    this.navigate('main');
                }
            }
            
            resetProfile() {
                if (confirm('ÌîÑÎ°úÌïÑÏùÑ Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                    this.state.userProfile = { age: '', experience: '', injuries: [] };
                    localStorage.removeItem('userProfile');
                    this.navigate('welcome');
                }
            }
            
            startRoutine(routineId) {
                this.state.currentRoutine = this.routines[routineId];
                this.state.currentPhase = 0;
                this.state.currentExercise = 0;
                this.state.timeRemaining = this.getCurrentExercise().duration;
                this.state.isRunning = false;
                this.navigate('exercise');
            }
            
            getCurrentExercise() {
                return this.state.currentRoutine.phases[this.state.currentPhase].exercises[this.state.currentExercise];
            }
            
            nextExercise() {
                const phase = this.state.currentRoutine.phases[this.state.currentPhase];
                
                if (this.state.currentExercise < phase.exercises.length - 1) {
                    this.state.currentExercise++;
                } else if (this.state.currentPhase < this.state.currentRoutine.phases.length - 1) {
                    this.state.currentPhase++;
                    this.state.currentExercise = 0;
                } else {
                    // Routine completed
                    this.completeRoutine();
                    return;
                }
                
                this.state.timeRemaining = this.getCurrentExercise().duration;
                this.state.isRunning = false;
                this.render();
            }
            
            prevExercise() {
                if (this.state.currentExercise > 0) {
                    this.state.currentExercise--;
                } else if (this.state.currentPhase > 0) {
                    this.state.currentPhase--;
                    const phase = this.state.currentRoutine.phases[this.state.currentPhase];
                    this.state.currentExercise = phase.exercises.length - 1;
                }
                
                this.state.timeRemaining = this.getCurrentExercise().duration;
                this.state.isRunning = false;
                this.render();
            }
            
            toggleTimer() {
                this.state.isRunning = !this.state.isRunning;
                
                if (this.state.isRunning) {
                    this.state.timerInterval = setInterval(() => {
                        this.state.timeRemaining--;
                        this.updateTimerDisplay();
                        
                        if (this.state.timeRemaining <= 0) {
                            this.state.isRunning = false;
                            clearInterval(this.state.timerInterval);
                            this.render();
                            this.playSound();
                        }
                    }, 1000);
                } else {
                    clearInterval(this.state.timerInterval);
                }
                
                this.render();
            }
            
            completeRoutine() {
                const session = {
                    routine: this.state.currentRoutine.title,
                    date: new Date().toISOString(),
                    duration: this.state.currentRoutine.totalTime
                };
                
                this.state.sessionProgress.push(session);
                this.saveProgress();
                this.navigate('completion');
            }
            
            navigate(screen) {
                this.state.currentScreen = screen;
                this.render();
            }
            
            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            
            updateTimerDisplay() {
                const timerEl = document.querySelector('.timer-display');
                if (timerEl) {
                    timerEl.textContent = this.formatTime(this.state.timeRemaining);
                }
            }
            
            playSound() {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch (e) {
                    console.log('Timer finished!');
                    
                    if ('vibrate' in navigator) {
                        navigator.vibrate([200, 100, 200]);
                    }
                }
            }
            
            getProgressPercentage() {
                const totalExercises = this.state.currentRoutine.phases.reduce((total, phase) => total + phase.exercises.length, 0);
                const completedExercises = this.state.currentRoutine.phases.slice(0, this.state.currentPhase).reduce((total, phase) => total + phase.exercises.length, 0) + this.state.currentExercise;
                return Math.round((completedExercises / totalExercises) * 100);
            }
            
            render() {
                const content = document.getElementById('app-content');
                content.innerHTML = this.getScreenHTML();
                content.className = 'fade-in';
            }
            
            getScreenHTML() {
                switch (this.state.currentScreen) {
                    case 'welcome':
                        return this.renderWelcomeScreen();
                    case 'main':
                        return this.renderMainScreen();
                    case 'exercise':
                        return this.renderExerciseScreen();
                    case 'completion':
                        return this.renderCompletionScreen();
                    case 'education':
                        return this.renderEducationScreen();
                    case 'progress':
                        return this.renderProgressScreen();
                    default:
                        return this.renderWelcomeScreen();
                }
            }
            
            createDropdown(id, field, placeholder, options, selectedValue) {
                const selectedText = selectedValue ? options.find(opt => opt.value === selectedValue)?.text || placeholder : placeholder;
                
                return `
                    <div class="custom-dropdown" id="${id}">
                        <div class="dropdown-selected" data-action="toggle-dropdown" data-value="${id}">
                            <span>${selectedText}</span>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                        <div class="dropdown-options">
                            ${options.map(option => `
                                <div class="dropdown-item" data-action="select-option" data-value="${option.value}" data-field="${field}">
                                    ${option.text}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            renderWelcomeScreen() {
                const { age, experience, injuries } = this.state.userProfile;
                const isComplete = age && experience && injuries.length > 0;
                
                const ageOptions = [
                    { value: '8-9', text: '8-9ÏÑ∏' },
                    { value: '10-12', text: '10-12ÏÑ∏' },
                    { value: '13-15', text: '13-15ÏÑ∏' },
                    { value: '16-18', text: '16-18ÏÑ∏' }
                ];
                
                const experienceOptions = [
                    { value: 'beginner', text: 'Ï¥àÍ∏â (1ÎÖÑ ÎØ∏Îßå)' },
                    { value: 'intermediate', text: 'Ï§ëÍ∏â (1-3ÎÖÑ)' },
                    { value: 'advanced', text: 'Í≥†Í∏â (3ÎÖÑ Ïù¥ÏÉÅ)' }
                ];
                
                return `
                    <div class="header">
                        <h1>üéæ Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠ ÌîÑÎ°ú</h1>
                        <p>ÏïàÏ†ÑÌïòÍ≥† Í≥ºÌïôÏ†ÅÏù∏ Ï£ºÎãàÏñ¥ Ï†ÑÏö© Í∞ÄÏù¥Îìú</p>
                    </div>
                    <div class="content profile-setup">
                        <div class="form-group">
                            <label class="form-label">ÎÇòÏù¥ <span style="color: #ef4444">*</span></label>
                            ${this.createDropdown('age-dropdown', 'age', 'ÎÇòÏù¥Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî', ageOptions, age)}
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Ïä§ÏøºÏãú Í≤ΩÌóò <span style="color: #ef4444">*</span></label>
                            ${this.createDropdown('experience-dropdown', 'experience', 'Í≤ΩÌóò ÏàòÏ§ÄÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî', experienceOptions, experience)}
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ÌòÑÏû¨ Î∂ÄÏÉÅÏù¥ÎÇò ÌÜµÏ¶ù Î∂ÄÏúÑ <span style="color: #ef4444">*</span></label>
                            <div class="checkbox-group">
                                ${['Î¨¥Î¶é', 'Î∞úÎ™©', 'ÌóàÎ¶¨', 'Ïñ¥Íπ®', 'ÏÜêÎ™©', 'ÏóÜÏùå'].map(injury => `
                                    <div class="checkbox-item ${injuries.includes(injury) ? 'selected' : ''}" data-action="toggle-injury" data-value="${injury}">
                                        <div class="checkbox ${injuries.includes(injury) ? 'checked' : ''}">
                                            ${injuries.includes(injury) ? '‚úì' : ''}
                                        </div>
                                        <span>${injury}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" data-action="complete-profile" ${!isComplete ? 'disabled' : ''}>
                            ${isComplete ? 'ÌîÑÎ°úÌïÑ ÏôÑÎ£åÌïòÍ∏∞' : 'Î™®Îì† Ìï≠Î™©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî'}
                        </button>
                        
                        <div class="safety-tip" style="margin-top: 20px;">
                            <strong>Ï£ºÎãàÏñ¥ ÏÑ†Ïàò ÏïàÏ†Ñ ÏàòÏπô:</strong><br>
                            ÏÑ±Ïû•Í∏∞ ÏÑ†ÏàòÏùò ÏïàÏ†ÑÏùÑ ÏúÑÌï¥ ÌÜµÏ¶ùÏù¥ ÎäêÍª¥ÏßÄÎ©¥ Ï¶âÏãú Ï§ëÎã®ÌïòÍ≥†, Í≥ºÎèÑÌïú Ïä§Ìä∏Î†àÏπ≠ÏùÄ ÌîºÌï¥Ï£ºÏÑ∏Ïöî. ÏÑ±Ïû•Ìåê Î≥¥Ìò∏Í∞Ä Í∞ÄÏû• Ï§ëÏöîÌï©ÎãàÎã§.
                            ${age === '8-9' ? '<br><br><strong>‚ö†Ô∏è 8-9ÏÑ∏ ÌäπÎ≥Ñ Ï£ºÏùò:</strong> ÎçîÏö± Î∂ÄÎìúÎüΩÍ≥† ÏßßÏùÄ ÏãúÍ∞ÑÏúºÎ°ú ÏßÑÌñâÌïòÎ©∞, Î∞òÎìúÏãú Î≥¥Ìò∏Ïûê ÏßÄÎèÑÌïòÏóê Ïã§ÏãúÌïòÏÑ∏Ïöî.' : ''}
                        </div>
                        
                        <div class="install-help">
                            <h4>üì± Ïï± ÏÑ§Ïπò ÏïàÎÇ¥</h4>
                            <p><strong>ÏïàÎìúÎ°úÏù¥Îìú:</strong></p>
                            <ul>
                                <li>Chrome Î∏åÎùºÏö∞Ï†Ä Î©îÎâ¥(‚ãÆ) ‚Üí "Ïï± ÏÑ§Ïπò" ÎòêÎäî "Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä"</li>
                            </ul>
                            <p><strong>ÏïÑÏù¥Ìè∞:</strong></p>
                            <ul>
                                <li>Safari ÌïòÎã® Í≥µÏú† Î≤ÑÌäº(‚ñ°‚Üë) ‚Üí "Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä"</li>
                            </ul>
                            <p>ÏÑ§Ïπò ÌõÑ Ïò§ÌîÑÎùºÏù∏ÏóêÏÑúÎèÑ ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§!</p>
                        </div>
                    </div>
                `;
            }
            
            renderMainScreen() {
                const { age, experience } = this.state.userProfile;
                const totalSessions = this.state.sessionProgress.length;
                const warmupSessions = this.state.sessionProgress.filter(s => s.routine.includes('ÏõúÏóÖ')).length;
                
                return `
                    <div class="header">
                        <h1>üéæ Ïä§ÏøºÏãú Ïä§Ìä∏Î†àÏπ≠ ÌîÑÎ°ú</h1>
                        <p>ÏïàÏ†ÑÌïòÍ≥† Í≥ºÌïôÏ†ÅÏù∏ Ïä§Ìä∏Î†àÏπ≠ÏúºÎ°ú Í≤ΩÍ∏∞Î†• Ìñ•ÏÉÅ</p>
                        <div style="margin-top: 12px; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <span style="background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 20px; font-size: 12px;">
                                ${age} ‚Ä¢ ${experience === 'beginner' ? 'Ï¥àÍ∏â' : experience === 'intermediate' ? 'Ï§ëÍ∏â' : 'Í≥†Í∏â'}
                            </span>
                            <button style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 4px 8px; border-radius: 50%; cursor: pointer; touch-action: manipulation;" data-action="reset-profile" title="ÌîÑÎ°úÌïÑ Ï¥àÍ∏∞Ìôî">‚öôÔ∏è</button>
                        </div>
                    </div>
                    <div class="content">
                        <div class="grid" style="gap: 16px;">
                            <button class="btn btn-primary" data-action="start-routine" data-value="warmup">
                                <div style="text-align: left;">
                                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">üî• Í≤ΩÍ∏∞ Ï†Ñ ÏõúÏóÖ</div>
                                    <div style="font-size: 14px; opacity: 0.9;">ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠ ‚Ä¢ 15-20Î∂Ñ</div>
                                    <div style="font-size: 12px; opacity: 0.8;">3Îã®Í≥Ñ Í≥ºÌïôÏ†Å Ï§ÄÎπÑÏö¥Îèô</div>
                                </div>
                            </button>
                            
                            <button class="btn btn-secondary" data-action="start-routine" data-value="cooldown">
                                <div style="text-align: left;">
                                    <div style="font-size: 18px; font-weight: 700; margin-bottom: 4px;">‚ùÑÔ∏è Í≤ΩÍ∏∞ ÌõÑ Ïø®Îã§Ïö¥</div>
                                    <div style="font-size: 14px; opacity: 0.9;">Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠ ‚Ä¢ 15-20Î∂Ñ</div>
                                    <div style="font-size: 12px; opacity: 0.8;">Í∑ºÏú° Ïù¥ÏôÑ Î∞è ÌöåÎ≥µ Ï¥âÏßÑ</div>
                                </div>
                            </button>
                        </div>
                        
                        <div class="stats-grid" style="margin: 24px 0;">
                            <div class="stat-card">
                                <div class="stat-value">${totalSessions}</div>
                                <div class="stat-label">ÏôÑÎ£å ÏÑ∏ÏÖò</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${warmupSessions}</div>
                                <div class="stat-label">ÏõúÏóÖ ÏÑ∏ÏÖò</div>
                            </div>
                        </div>
                        
                        <div class="grid grid-2" style="gap: 12px;">
                            <button class="btn btn-outline" data-action="navigate" data-value="education">
                                <div style="text-align: center;">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üìö</div>
                                    <div style="font-size: 14px; font-weight: 600;">ÍµêÏú° ÏÑºÌÑ∞</div>
                                </div>
                            </button>
                            
                            <button class="btn btn-outline" data-action="navigate" data-value="progress">
                                <div style="text-align: center;">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üìä</div>
                                    <div style="font-size: 14px; font-weight: 600;">ÏßÑÌñâ ÏÉÅÌô©</div>
                                </div>
                            </button>
                        </div>
                    </div>
                `;
            }
            
            renderExerciseScreen() {
                const exercise = this.getCurrentExercise();
                const phase = this.state.currentRoutine.phases[this.state.currentPhase];
                const progress = this.getProgressPercentage();
                const isFirstExercise = this.state.currentPhase === 0 && this.state.currentExercise === 0;
                
                return `
                    <div class="header">
                        <h1>${this.state.currentRoutine.title}</h1>
                        <p>${phase.name}</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div style="font-size: 12px; opacity: 0.9; margin-top: 8px;">
                            ÏßÑÌñâÎ•†: ${progress}%
                        </div>
                    </div>
                    <div class="content">
                        <div class="exercise-card">
                            <div class="exercise-title">${exercise.name}</div>
                            <div class="exercise-info">
                                <strong>ÎåÄÏÉÅ Í∑ºÏú°:</strong> ${exercise.targetMuscles}
                                ${exercise.reps ? `<br><strong>Î∞òÎ≥µ ÌöüÏàò:</strong> ${exercise.reps}` : ''}
                            </div>
                            
                            <div class="timer ${this.state.isRunning ? 'running' : ''}">
                                <div class="timer-display">${this.formatTime(this.state.timeRemaining)}</div>
                            </div>
                            
                            <div class="exercise-instructions">
                                <strong>ÎèôÏûë Î∞©Î≤ï:</strong><br>
                                ${exercise.instructions}
                            </div>
                            
                            ${exercise.safetyTip ? `
                                <div class="safety-tip">
                                    <strong>ÏïàÏ†Ñ ÏàòÏπô:</strong> ${exercise.safetyTip}
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="controls">
                            <button class="btn-control btn-skip" data-action="prev-exercise" ${isFirstExercise ? 'disabled' : ''}>
                                ‚èÆÔ∏è Ïù¥Ï†Ñ
                            </button>
                            <button class="btn-control btn-play" data-action="toggle-timer">
                                ${this.state.isRunning ? '‚è∏Ô∏è ÏùºÏãúÏ†ïÏßÄ' : '‚ñ∂Ô∏è ÏãúÏûë'}
                            </button>
                            <button class="btn-control btn-skip" data-action="next-exercise">
                                Îã§Ïùå ‚è≠Ô∏è
                            </button>
                        </div>
                        
                        <button class="btn btn-outline" data-action="navigate" data-value="main" style="margin-top: 16px;">
                            üè† Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                        </button>
                    </div>
                `;
            }
            
            renderCompletionScreen() {
                return `
                    <div class="completion-screen">
                        <span class="completion-icon">üéâ</span>
                        <h1 style="font-size: 28px; font-weight: 700; color: #1f2937; margin-bottom: 16px;">Ïö¥Îèô ÏôÑÎ£å!</h1>
                        <p style="color: #6b7280; margin-bottom: 32px;">ÌõåÎ•≠Ìï©ÎãàÎã§! Î™®Îì† Ïä§Ìä∏Î†àÏπ≠ÏùÑ ÏôÑÎ£åÌñàÏäµÎãàÎã§.</p>
                        
                        <div style="background: #f0fdf4; border: 2px solid #10b981; border-radius: 16px; padding: 20px; margin-bottom: 24px;">
                            <h3 style="color: #065f46; font-weight: 700; margin-bottom: 8px;">ÏôÑÎ£åÌïú Ïö¥Îèô</h3>
                            <p style="color: #047857; font-weight: 600;">${this.state.currentRoutine.title}</p>
                            <p style="color: #059669; font-size: 14px;">${new Date().toLocaleDateString('ko-KR')} ÏôÑÎ£å</p>
                        </div>
                        
                        <div class="grid grid-2" style="gap: 16px; margin-bottom: 24px;">
                            <button class="btn btn-primary" data-action="navigate" data-value="main">
                                üè† Î©îÏù∏ ÌôîÎ©¥
                            </button>
                            <button class="btn btn-outline" data-action="navigate" data-value="progress">
                                üìä ÏßÑÌñâ ÏÉÅÌô©
                            </button>
                        </div>
                        
                        <div style="background: #eff6ff; border: 2px solid #3b82f6; border-radius: 12px; padding: 16px; font-size: 14px; color: #1e40af;">
                            <strong>üí° Ïö¥Îèô ÌõÑ ÌåÅ:</strong><br>
                            Ï∂©Î∂ÑÌïú ÏàòÎ∂Ñ ÏÑ≠Ï∑®ÏôÄ Ï†ÅÏ†àÌïú Ìú¥ÏãùÏùÑ Ï∑®ÌïòÏÑ∏Ïöî. Î™∏Ïùò Î≥ÄÌôîÎ•º Ï£ºÏùòÍπäÍ≤å Í¥ÄÏ∞∞ÌïòÍ≥†, Ïù¥ÏÉÅÏù¥ ÏûàÏúºÎ©¥ Ï¶âÏãú Ìú¥ÏãùÌïòÏÑ∏Ïöî.
                        </div>
                    </div>
                `;
            }
            
            renderEducationScreen() {
                return `
                    <div class="header">
                        <h1>üìö ÍµêÏú° ÏÑºÌÑ∞</h1>
                        <p>Ïò¨Î∞îÎ•∏ Ïä§Ìä∏Î†àÏπ≠ Î∞©Î≤ïÏùÑ Î∞∞ÏõåÎ≥¥ÏÑ∏Ïöî</p>
                    </div>
                    <div class="content">
                        <div class="education-content">
                            <div class="education-card">
                                <h3>üîÑ ÎèôÏ†Å vs Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠</h3>
                                <p><strong>ÎèôÏ†Å Ïä§Ìä∏Î†àÏπ≠:</strong> Í≤ΩÍ∏∞ Ï†ÑÏóê Ïã§ÏãúÌïòÎ©∞, ÏõÄÏßÅÏù¥Î©¥ÏÑú Í∑ºÏú°ÏùÑ ÏòàÏó¥Ìï©ÎãàÎã§. ÌòàÏï°ÏàúÌôòÏùÑ Ï¥âÏßÑÌïòÍ≥† Ïã†Í≤ΩÍ≥ÑÎ•º ÌôúÏÑ±ÌôîÌï©ÎãàÎã§.</p>
                                <p><strong>Ï†ïÏ†Å Ïä§Ìä∏Î†àÏπ≠:</strong> Í≤ΩÍ∏∞ ÌõÑÏóê Ïã§ÏãúÌïòÎ©∞, Í∑ºÏú°ÏùÑ Ïù¥ÏôÑÏãúÏºú ÌöåÎ≥µÏùÑ ÎèïÏäµÎãàÎã§. Ï†ñÏÇ∞ Ï†úÍ±∞ÏôÄ Í∑ºÏú°ÌÜµ ÏòàÎ∞©Ïóê Ìö®Í≥ºÏ†ÅÏûÖÎãàÎã§.</p>
                            </div>
                            
                            <div class="education-card" style="background: #fef3c7; border-color: #f59e0b;">
                                <h3 style="color: #92400e;">‚ö†Ô∏è Ï£ºÎãàÏñ¥ ÏÑ†Ïàò ÌäπÎ≥Ñ Ï£ºÏùòÏÇ¨Ìï≠</h3>
                                <ul style="color: #92400e;">
                                    <li>ÏÑ±Ïû•Ìåê Î≥¥Ìò∏Î•º ÏúÑÌï¥ Í≥ºÎèÑÌïú Ïä§Ìä∏Î†àÏπ≠ Í∏àÏßÄ</li>
                                    <li>ÌÜµÏ¶ùÏù¥ ÏïÑÎãå 'ÎãπÍ∏∞Îäî' ÎäêÎÇåÏóêÏÑú Î©àÏ∂îÍ∏∞</li>
                                    <li>Î∞òÎèôÏùÑ Ïù¥Ïö©Ìïú Ïä§Ìä∏Î†àÏπ≠ Ï†àÎåÄ Í∏àÏßÄ</li>
                                    <li>Ï∂©Î∂ÑÌïú ÏàòÎ∂Ñ ÏÑ≠Ï∑® Î∞è Ìú¥Ïãù</li>
                                    <li>Ï†êÏßÑÏ†ÅÏù∏ ÌõàÎ†® Í∞ïÎèÑ Ï¶ùÍ∞Ä</li>
                                </ul>
                            </div>
                            
                            <div class="education-card" style="background: #eff6ff; border-color: #3b82f6;">
                                <h3 style="color: #1e40af;">üéæ Ïä§ÏøºÏãú Î∂ÄÏÉÅ ÏòàÎ∞©</h3>
                                <ul style="color: #1e40af;">
                                    <li>Í≤ΩÍ∏∞ Ï†Ñ Î∞òÎìúÏãú Ï∂©Î∂ÑÌïú ÏõúÏóÖ (15-20Î∂Ñ)</li>
                                    <li>Ïò¨Î∞îÎ•∏ Ïã†Î∞ú Ï∞©Ïö© (ÎÖºÏä¨Î¶Ω Ïä§ÏøºÏãúÌôî)</li>
                                    <li>Ï†ïÍ∏∞Ï†ÅÏù∏ Í∑ºÎ†• Ïö¥Îèô Î≥ëÌñâ</li>
                                    <li>Ï†ÅÏ†àÌïú Ìú¥ÏãùÍ≥º ÌöåÎ≥µ ÏãúÍ∞Ñ ÌôïÎ≥¥</li>
                                    <li>Ïò¨Î∞îÎ•∏ ÏûêÏÑ∏ÏôÄ Í∏∞Ïà† ÏäµÎìù</li>
                                </ul>
                            </div>
                            
                            <div class="education-card" style="background: #f0fdf4; border-color: #10b981;">
                                <h3 style="color: #065f46;">üí™ Ïä§ÏøºÏãú Ï£ºÏöî Í∑ºÏú°Íµ∞</h3>
                                <p style="color: #047857;"><strong>ÌïòÏ≤¥:</strong> ÎåÄÌá¥ÏÇ¨ÎëêÍ∑º, ÌñÑÏä§Ìä∏ÎßÅ, ÎëîÍ∑º, Ï¢ÖÏïÑÎ¶¨ - Îü∞ÏßÄÏôÄ Îπ†Î•∏ Ïù¥ÎèôÏùÑ ÏúÑÌï¥ Ï§ëÏöî</p>
                                <p style="color: #047857;"><strong>ÏÉÅÏ≤¥:</strong> Ïñ¥Íπ®, ÏÇºÎëêÍ∑º, Îì± - Í∞ïÎ†•Ìïú Ïä§ÏúôÏùÑ ÏúÑÌï¥ ÌïÑÏöî</p>
                                <p style="color: #047857;"><strong>ÏΩîÏñ¥:</strong> Î≥µÎ∂Ä, ÌóàÎ¶¨ - Î™∏ÌÜµ ÌöåÏ†ÑÍ≥º ÏïàÏ†ïÏÑ±ÏùÑ ÏúÑÌï¥ ÌïµÏã¨</p>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" data-action="navigate" data-value="main" style="margin-top: 20px;">
                            üè† Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                        </button>
                    </div>
                `;
            }
            
            renderProgressScreen() {
                const totalSessions = this.state.sessionProgress.length;
                const warmupSessions = this.state.sessionProgress.filter(s => s.routine.includes('ÏõúÏóÖ')).length;
                const cooldownSessions = this.state.sessionProgress.filter(s => s.routine.includes('Ïø®Îã§Ïö¥')).length;
                const recentSessions = this.state.sessionProgress.slice(-5).reverse();
                
                return `
                    <div class="header">
                        <h1>üìä ÏßÑÌñâ ÏÉÅÌô©</h1>
                        <p>ÎãπÏã†Ïùò Ïä§Ìä∏Î†àÏπ≠ Í∏∞Î°ùÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî</p>
                    </div>
                    <div class="content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value">${totalSessions}</div>
                                <div class="stat-label">Ï¥ù ÏôÑÎ£å ÏÑ∏ÏÖò</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${warmupSessions}</div>
                                <div class="stat-label">ÏõúÏóÖ ÏÑ∏ÏÖò</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${cooldownSessions}</div>
                                <div class="stat-label">Ïø®Îã§Ïö¥ ÏÑ∏ÏÖò</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${Math.round(this.state.sessionProgress.reduce((total, s) => total + (s.duration || 0), 0) / 60)}</div>
                                <div class="stat-label">Ï¥ù Ïö¥Îèô ÏãúÍ∞Ñ (ÏãúÍ∞Ñ)</div>
                            </div>
                        </div>
                        
                        <h3 style="font-weight: 700; color: #1f2937; margin: 24px 0 16px 0;">ÏµúÍ∑º ÌôúÎèô</h3>
                        
                        ${totalSessions === 0 ? `
                            <div style="text-align: center; padding: 40px 20px; color: #6b7280;">
                                <div style="font-size: 48px; margin-bottom: 16px;">üéØ</div>
                                <p>ÏïÑÏßÅ ÏôÑÎ£åÌïú ÏÑ∏ÏÖòÏù¥ ÏóÜÏäµÎãàÎã§.</p>
                                <p style="font-size: 14px; margin-top: 8px;">Ï≤´ Î≤àÏß∏ Ïä§Ìä∏Î†àÏπ≠ Î£®Ìã¥ÏùÑ ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî!</p>
                            </div>
                        ` : `
                            <div style="space-y: 12px;">
                                ${recentSessions.map(session => `
                                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 16px; margin-bottom: 12px;">
                                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                            <div>
                                                <div style="font-weight: 600; color: #1f2937; margin-bottom: 4px;">
                                                    ${session.routine.includes('ÏõúÏóÖ') ? 'üî•' : '‚ùÑÔ∏è'} ${session.routine}
                                                </div>
                                                <div style="font-size: 12px; color: #6b7280;">
                                                    ${session.duration ? `${session.duration}Î∂Ñ` : 'ÏôÑÎ£å'}
                                                </div>
                                            </div>
                                            <div style="font-size: 12px; color: #6b7280; text-align: right;">
                                                ${new Date(session.date).toLocaleDateString('ko-KR')}<br>
                                                ${new Date(session.date).toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })}
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            ${totalSessions >= 5 ? `
                                <div style="background: #f0fdf4; border: 2px solid #10b981; border-radius: 12px; padding: 16px; margin-top: 20px; text-align: center;">
                                    <div style="font-size: 24px; margin-bottom: 8px;">üèÜ</div>
                                    <div style="font-weight: 700; color: #065f46; margin-bottom: 4px;">Íæ∏Ï§ÄÌï®Ïùò Îã¨Ïù∏!</div>
                                    <div style="font-size: 14px; color: #047857;">Ïù¥ÎØ∏ ${totalSessions}ÌöåÏùò ÏÑ∏ÏÖòÏùÑ ÏôÑÎ£åÌñàÏäµÎãàÎã§!</div>
                                </div>
                            ` : ''}
                        `}
                        
                        <button class="btn btn-primary" data-action="navigate" data-value="main" style="margin-top: 20px;">
                            üè† Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                        </button>
                    </div>
                `;
            }
        }
        
        // PWA Installation
        let deferredPrompt;
        let installPromptShown = false;
        const installPrompt = document.getElementById('installPrompt');
        
        // PWA ÏÑ§Ïπò Í∞ÄÎä• Ïù¥Î≤§Ìä∏ Í∞êÏßÄ
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('beforeinstallprompt event fired');
            e.preventDefault();
            deferredPrompt = e;
            showInstallPrompt();
        });
        
        // PWA ÏÑ§Ïπò Î≤ÑÌäº ÌëúÏãú
        function showInstallPrompt() {
            if (!localStorage.getItem('installDismissed') && !installPromptShown) {
                installPrompt.style.display = 'flex';
                installPromptShown = true;
            }
        }
        
        // Ïï± ÏÑ§Ïπò Ïã§Ìñâ
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    console.log('User choice:', choiceResult.outcome);
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    } else {
                        console.log('User dismissed the install prompt');
                    }
                    deferredPrompt = null;
                    installPrompt.style.display = 'none';
                });
            } else {
                // ÎåÄÏïà ÏÑ§Ïπò Î∞©Î≤ï ÏïàÎÇ¥
                alert('Ïï± ÏÑ§Ïπò Î∞©Î≤ï:\n\nÏïàÎìúÎ°úÏù¥Îìú: Î∏åÎùºÏö∞Ï†Ä Î©îÎâ¥(‚ãÆ) ‚Üí "Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä"\nÏïÑÏù¥Ìè∞: Safari Í≥µÏú†Î≤ÑÌäº(‚ñ°‚Üë) ‚Üí "Ìôà ÌôîÎ©¥Ïóê Ï∂îÍ∞Ä"');
            }
        }
        
        // ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ Î¨¥Ïãú
        function dismissInstall() {
            installPrompt.style.display = 'none';
            localStorage.setItem('installDismissed', 'true');
        }
        
        // PWA ÏÑ§Ïπò ÏôÑÎ£å Í∞êÏßÄ
        window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            installPrompt.style.display = 'none';
        });
        
        // ÎÑ§Ìä∏ÏõåÌÅ¨ ÏÉÅÌÉú Í∞êÏßÄ
        function updateNetworkStatus() {
            const offlineBanner = document.getElementById('offlineBanner');
            if (navigator.onLine) {
                offlineBanner.style.display = 'none';
            } else {
                offlineBanner.style.display = 'block';
            }
        }
        
        window.addEventListener('online', updateNetworkStatus);
        window.addEventListener('offline', updateNetworkStatus);
        updateNetworkStatus();
        
        // Î∏åÎùºÏö∞Ï†Ä Ï∫êÏã± ÏµúÏ†ÅÌôî (Service Worker ÎåÄÏã†)
        if ('serviceWorker' in navigator) {
            console.log('Service Worker ÏßÄÏõêÎê® - Î≥ÑÎèÑ sw.js ÌååÏùº ÌïÑÏöî');
            // Service WorkerÎäî Î≥ÑÎèÑ ÌååÏùºÎ°ú Íµ¨ÌòÑ Í∂åÏû•
            // ÌòÑÏû¨Îäî localStorageÏôÄ Î∏åÎùºÏö∞Ï†Ä Ï∫êÏãúÎ°ú Ïò§ÌîÑÎùºÏù∏ Í∏∞Îä• Ï†úÍ≥µ
        }
        
        // Application Cache ÎåÄÏïàÏúºÎ°ú Î¶¨ÏÜåÏä§ ÌîÑÎ¶¨Î°úÎî©
        function preloadResources() {
            const resources = [
                'https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap'
            ];
            
            resources.forEach(url => {
                const link = document.createElement('link');
                link.rel = 'prefetch';
                link.href = url;
                document.head.appendChild(link);
            });
        }
        
        // Î¶¨ÏÜåÏä§ ÌîÑÎ¶¨Î°úÎî© Ïã§Ìñâ
        preloadResources();
        
        // Î™®Î∞îÏùº Ï†úÏä§Ï≤ò Î∞©ÏßÄ
        document.addEventListener('touchstart', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Pull-to-refresh Î∞©ÏßÄ
        let startY = 0;
        document.addEventListener('touchstart', e => {
            startY = e.touches[0].pageY;
        });
        
        document.addEventListener('touchmove', e => {
            const y = e.touches[0].pageY;
            if (startY <= y && window.pageYOffset === 0) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Ïï± Ï¥àÍ∏∞Ìôî
        const app = new StretchingApp();
        
        // ÏßÄÏó∞Îêú ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ ÌëúÏãú
        setTimeout(() => {
            if (!window.matchMedia('(display-mode: standalone)').matches && 
                !localStorage.getItem('installDismissed') && 
                !installPromptShown) {
                showInstallPrompt();
            }
        }, 10000);
        
        // Ïä§ÌÉ†ÎìúÏñºÎ°† Î™®ÎìúÏóêÏÑú Ïã§Ìñâ Ï§ëÏù∏ÏßÄ Í∞êÏßÄ
        if (window.matchMedia('(display-mode: standalone)').matches) {
            console.log('Running in standalone mode');
            // Ïù¥ÎØ∏ ÏÑ§ÏπòÎêú ÏÉÅÌÉúÏù¥ÎØÄÎ°ú ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ Ïà®Í∏∞Í∏∞
            installPrompt.style.display = 'none';
        }
    </script>
</body>
</html>
